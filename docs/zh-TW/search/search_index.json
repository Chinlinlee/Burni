{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"Burni documentation","text":""},{"location":"#_1","title":"\ud83d\udea7 \u6b63\u5728\u9032\u884c\u4e2d...","text":""},{"location":"#_2","title":"\u8b93\u6211\u5011\u958b\u59cb\u5427","text":"<ul> <li>\u5b89\u88dd</li> <li>\u8a2d\u5b9a</li> <li>\u90e8\u5c6c</li> </ul>"},{"location":"Introduction/","title":"\u4ecb\u7d39","text":""},{"location":"Introduction/#burni-fhir-server","title":"Burni FHIR Server","text":"<p>Burni \u4f7f\u7528 Node.JS \u3001Express \u6846\u67b6\u4ee5\u53ca MongoDB \u5be6\u4f5c FHIR R4 Server\uff0c\u7d93\u7531\u7c21\u55ae\u7684\u8a2d\u5b9a\u5373\u53ef\u7522\u751f\u6307\u5b9a FHIR Resource\u7684 Mongoose Schema\u3001API\u7a0b\u5f0f\u78bc\u4e26\u53ef\u81ea\u884c\u66f4\u6539\uff0c\u6eff\u8db3\u9700\u6c42\u3002\u76ee\u524dBurni\u652f\u63f4Windows\u4ee5\u53caLinux\uff0c\u8b93\u958b\u767c\u4eba\u54e1\u53ef\u4ee5\u5feb\u901f\u67b6\u8a2d FHIR Server\u3002</p> <p>Burni \u6240\u4f7f\u7528\u7684 FHIR \u7248\u672c\u70ba v4.0.1\u3002</p>"},{"location":"Introduction/#server","title":"Server \u80fd\u529b\u8072\u660e","text":"<p>Burni \u4f7f\u7528 AEGIS Touchstone Basic-R4-Server \u6e2c\u8a66. </p> <p>\u6e2c\u8a66\u7d50\u679c: </p> <ul> <li>FHIR4-0-1-Basic-Server version 18 (2,216 tests has been passed, 100% Pass)</li> <li>FHIR4-0-1-Basic-Server version 14 (1,948 tests has been passed, 100% Pass)</li> </ul>"},{"location":"Code%20API%20Documentation/models/FHIR/searchParameterQueryHandler/","title":"searchParameterQueryHandler","text":"<p>\u6b64\u6a94\u6848\u4f4d\u65bc <code>models/FHIR/</code>.</p>"},{"location":"Code%20API%20Documentation/models/FHIR/searchParameterQueryHandler/#functions","title":"Functions","text":"getStringQuery(query, paramsSearchFields, queryFieldName) getAddressQuery(query, queryFieldName) getNameQuery(query, queryFieldName) getTokenQuery(query, paramsSearchFields, queryFieldName) getPolyTokenQuery(query, paramsSearchFields, queryFieldName, paramsSearchFunc) getNumberQuery(query, paramsSearchFields, queryFieldName) getPolyDateQuery(query, paramsSearchFields, queryFieldName, paramsSearchFunc)"},{"location":"Code%20API%20Documentation/models/FHIR/searchParameterQueryHandler/#getstringqueryquery-paramssearchfields-queryfieldname","title":"getStringQuery(query, paramsSearchFields, queryFieldName)","text":"<p>Kind: global function  </p> Param Type Description query <code>string</code> The request query object paramsSearchFields <code>Array.&lt;string&gt;</code> The fields of search parameter that in resource queryFieldName <code>string</code> The name of search parameter <p>Example (Example of `address-city` of search parameter of the Patient resource) <pre><code>// refresh query object to \n// {\n//    \"$and\": [\n//       {\n//           \"$or\": [\n//               {\n//                   \"address.city\": {\n//                       \"$regex\": /^PleasantVille/gi\n//                   }\n//               }\n//          ]\n//      }\n//   ]\n// }\ngetStringQuery(\n{\n\"address-city\": \"PleasantVille\",\n\"gender\": \"male\",\n\"$and\": []\n}, [\"address.city\"], \"address-city\");\n</code></pre> </p>"},{"location":"Code%20API%20Documentation/models/FHIR/searchParameterQueryHandler/#getaddressqueryquery-queryfieldname","title":"getAddressQuery(query, queryFieldName)","text":"<p>Kind: global function  </p> Param Type Description query <code>string</code> The request query object queryFieldName <code>string</code> The name of search parameter <p>Example (Example of `address` of search parameter of the Patient resource) <pre><code>// refresh query object to \n// {\n//     \"$and\": [\n//         {\n//             \"$or\": [\n//                 {\n//                     \"address.line\": {\n//                         \"$regex\": /^PleasantVille/gi\n//                     }\n//                 },\n//                 {\n//                     \"address.city\": {\n//                         \"$regex\": /^PleasantVille/gi\n//                     }\n//                 },\n//                 {\n//                     \"address.district\": {\n//                         \"$regex\": /^PleasantVille/gi\n//                     }\n//                 },\n//                 {\n//                     \"address.state\": {\n//                         \"$regex\": /^PleasantVille/gi\n//                     }\n//                 },\n//                 {\n//                     \"address.postalCode\": {\n//                         \"$regex\": /^PleasantVille/gi\n//                     }\n//                 },\n//                 {\n//                     \"address.country\": {\n//                         \"$regex\": /^PleasantVille/gi\n//                     }\n//                 }\n//             ]\n//         }\n//     ]\n// }\ngetAddressQuery(\n{\n\"address\": \"PleasantVille\",\n\"gender\": \"male\",\n\"$and\": []\n}, \"address\");\n</code></pre> </p>"},{"location":"Code%20API%20Documentation/models/FHIR/searchParameterQueryHandler/#getnamequeryquery-queryfieldname","title":"getNameQuery(query, queryFieldName)","text":"<p>Kind: global function  </p> Param Type Description query <code>string</code> The request query object queryFieldName <code>string</code> The name of search parameter <p>Example (Example of `name` of search parameter of the Patient resource) <pre><code>// refresh query object to \n// {\n//     \"$and\": [\n//         {\n//             \"$or\": [\n//                 {\n//                     \"$or\": [\n//                         {\n//                             \"name.text\": {\n//                                 \"$regex\": /^Chalmers/gi\n//                             }\n//                         },\n//                         {\n//                             \"name.family\": {\n//                                 \"$regex\": /^Chalmers/gi\n//                             }\n//                         },\n//                         {\n//                             \"name.given\": {\n//                                 \"$regex\": /^Chalmers/gi\n//                             }\n//                         },\n//                         {\n//                             \"name.suffix\": {\n//                                 \"$regex\": /^Chalmers/gi\n//                             }\n//                         },\n//                         {\n//                             \"name.prefix\": {\n//                                 \"$regex\": /^Chalmers/gi\n//                             }\n//                         }\n//                     ]\n//                 }\n//             ]\n//         }\n//     ]\n// }\n</code></pre> Example <pre><code>getNameQuery(\n{\n\"name\": \"Chalmers\"\n}, [\"name\"], \"name\");\n</code></pre> </p>"},{"location":"Code%20API%20Documentation/models/FHIR/searchParameterQueryHandler/#gettokenqueryquery-paramssearchfields-queryfieldname","title":"getTokenQuery(query, paramsSearchFields, queryFieldName)","text":"<p>Kind: global function  </p> Param Type Description query <code>string</code> The request query object that in resource paramsSearchFields <code>Array.&lt;string&gt;</code> The fields of search parameter that in resource queryFieldName <code>string</code> The name of search parameter <p></p>"},{"location":"Code%20API%20Documentation/models/FHIR/searchParameterQueryHandler/#getpolytokenqueryquery-paramssearchfields-queryfieldname-paramssearchfunc","title":"getPolyTokenQuery(query, paramsSearchFields, queryFieldName, paramsSearchFunc)","text":"<p>Kind: global function  </p> Param Type Description query <code>Object</code> The request query object paramsSearchFields <code>Array.&lt;string&gt;</code> The fields of search parameters that in resource queryFieldName <code>string</code> The name of search parameter paramsSearchFunc <code>function</code> parameter search function corresponds to data type e.g. code, codeable concept <p>Example (Example of `address-use` of search parameter of the Patient resource) <pre><code>// refresh query object to \n// {\n//     \"$and\": [\n//         {\n//             \"$or\": [\n//                 {\n//                     \"$or\": [\n//                         {\n//                             \"address.use.system\": \"home\" //because some data types have system \n//                         },\n//                         {\n//                             \"address.use\": \"home\"\n//                         }\n//                     ]\n//                 }\n//             ]\n//         }\n//     ]\n// }\ngetPolyTokenQuery(\n{\n\"address-use\": \"home\"\n}, [\"address.use\"], \"address-use\", (query)=&gt; {\ntry {\nqueryHandler.getStringQuery(query, paramsSearchFields, *\"address-city\");\n} catch (e) {\nconsole.error(e);\nthrow e;\n}\n});\n</code></pre> </p>"},{"location":"Code%20API%20Documentation/models/FHIR/searchParameterQueryHandler/#getnumberqueryquery-paramssearchfields-queryfieldname","title":"getNumberQuery(query, paramsSearchFields, queryFieldName)","text":"<p>Kind: global function  </p> Param Type Description query <code>string</code> The request query object paramsSearchFields <code>Array.&lt;string&gt;</code> The fields of search parameters that in resource queryFieldName <code>string</code> The name of search parameter <p>Example (Example of `variant-start` of search parameter of the Molecularsequence resource) <pre><code>// refresh query object to \n// {\n//     \"$and\": [\n//         {\n//             \"$or\": [\n//                 {\n//                     \"variant.start\": {\n//                         \"$eq\": 22125503\n//                     }\n//                 }\n//             ]\n//         }\n//     ]\n// }\ngetNumberQuery(\n{\n\"$and\": [], \"variant-start\" : 22125503\n}, [\"variant.start\"], \"variant-start\");\n</code></pre> </p>"},{"location":"Code%20API%20Documentation/models/FHIR/searchParameterQueryHandler/#getpolydatequeryquery-paramssearchfields-queryfieldname-paramssearchfunc","title":"getPolyDateQuery(query, paramsSearchFields, queryFieldName, paramsSearchFunc)","text":"<p>Kind: global function  </p> Param Type Description query <code>Object</code> The request query object paramsSearchFields <code>string</code> The fields of search parameters that in resource queryFieldName <code>string</code> The name of search parameter paramsSearchFunc <code>function</code> parameter search function corresponds to data type e.g. date, dateTime"},{"location":"FHIR%20API%20Documentation/Generate%20OpenAPI/","title":"\u7522\u751f OpenAPI","text":"<p>Burni \u4f7f\u7528 apidoc \u4ee5\u53ca\u5728<code>config/config.js</code>\u6a94\u6848\u8a2d\u5b9a\u7684Resources \u7522\u751f OpenAPI \u6587\u4ef6\u3002\u4e26\u4f7f\u7528ReDoc\u4f5c\u70baAPI\u6587\u4ef6\u7684\u7db2\u7ad9.</p> <p>Info</p> <p>API\u6587\u4ef6\u5b8c\u6574\u7bc4\u4f8b\u7db2\u7ad9 here</p>"},{"location":"FHIR%20API%20Documentation/Generate%20OpenAPI/#_1","title":"\u5982\u4f55\u7522\u751f","text":"<ul> <li>\u4f7f\u7528\u4e0b\u9762\u7684\u6307\u4ee4\u65bc<code>docs/apidoc/apidoc-sources</code>\u7522\u751f\u542b\u6709[apidoc]\u8a3b\u89e3\u7684\u6a94\u6848 <pre><code>node api_generator/doc-generator.js\n</code></pre> \u7bc4\u4f8b\uff1a <pre><code>/**\n     * \n     * @api {get} /fhir/Account/:id read Account\n     * @apiParam {string} id Resource ID in server\n     * @apiName readAccount\n     * @apiGroup Account\n     * @apiVersion  v2.1.0\n     * @apiDescription read Account resource by id.\n     * \n     * @apiExample {Shell} cURL\n     * #example from: https://chinlinlee.github.io/Burni/assets/FHIR/fhir-resource-examples/account-example.json\n     * curl --location --request GET 'http://burni.example.com/fhir/Account/0a2d866d-0362-4e05-9880-f62d054668cf'\n     * @apiExample {JavaScript} javascript Axios\n     //example from: https://chinlinlee.github.io/Burni/assets/FHIR/fhir-resource-examples/account-example.json\n    const axios = require('axios');\n    const config = {\n        method: 'get',\n        url: 'http://burni.example.com/fhir/Account/0a2d866d-0362-4e05-9880-f62d054668cf'\n    };\n    axios(config)\n    .then(function (response) {\n        console.log(JSON.stringify(response.data));\n    })\n    .catch(function (error) {\n        console.log(error);\n    });\n    * @apiSuccess (Success 200 Content-Type: application/fhir+json) {object} FHIR-JSON-RESOURCE\n    * @apiSuccessExample {json} (200) name: Success-Response Content-Type: application/fhir+json\n    {\n    \"resourceType\": \"Account\",\n    \"id\": \"0a2d866d-0362-4e05-9880-f62d054668cf\",\n    \"identifier\": [\n        {\n            \"system\": \"urn:oid:0.1.2.3.4.5.6.7\",\n            \"value\": \"654321\"\n        }\n    ],\n    \"status\": \"active\",\n    \"type\": {\n        \"coding\": [\n            {\n                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n                \"code\": \"PBILLACCT\",\n                \"display\": \"patient billing account\"\n            }\n        ],\n        \"text\": \"patient\"\n    },\n    \"name\": \"HACC Funded Billing for Peter James Chalmers\",\n    \"subject\": [\n        {\n            \"reference\": \"Patient/example\",\n            \"display\": \"Peter James Chalmers\"\n        }\n    ],\n    \"servicePeriod\": {\n        \"start\": \"2016-01-01T08:00:00+08:00\",\n        \"end\": \"2016-06-30T08:00:00+08:00\"\n    },\n    \"coverage\": [\n        {\n            \"coverage\": {\n                \"reference\": \"Coverage/7546D\"\n            },\n            \"priority\": 1\n        }\n    ],\n    \"owner\": {\n        \"reference\": \"Organization/hl7\"\n    },\n    \"description\": \"Hospital charges\",\n    \"meta\": {\n        \"tag\": [\n            {\n                \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActReason\",\n                \"code\": \"HTEST\",\n                \"display\": \"test health data\"\n            }\n        ],\n        \"versionId\": \"1\",\n        \"lastUpdated\": \"2022-02-13T22:30:14.037+08:00\"\n    }\n}\n    * \n    * @apiSuccess (Success 200 Content-Type: application/fhir+xml) {object} FHIR-XML-RESOURCE\n    * @apiSuccessExample {xml} (200) name: Success-Response-XML Content-Type: application/fhir+xml\n    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;Account xmlns=\"http://hl7.org/fhir\"&gt;&lt;id value=\"69efa3c0-73b1-4403-ba4b-ffd7b718d053\"/&gt;&lt;meta&gt;&lt;versionId value=\"1\"/&gt;&lt;lastUpdated value=\"2022-02-17T17:34:51.348+08:00\"/&gt;&lt;tag&gt;&lt;system value=\"http://terminology.hl7.org/CodeSystem/v3-ActReason\"/&gt;&lt;code value=\"HTEST\"/&gt;&lt;display value=\"test health data\"/&gt;&lt;/tag&gt;&lt;/meta&gt;&lt;identifier&gt;&lt;system value=\"urn:oid:0.1.2.3.4.5.6.7\"/&gt;&lt;value value=\"654321\"/&gt;&lt;/identifier&gt;&lt;status value=\"active\"/&gt;&lt;type&gt;&lt;coding&gt;&lt;system value=\"http://terminology.hl7.org/CodeSystem/v3-ActCode\"/&gt;&lt;code value=\"PBILLACCT\"/&gt;&lt;display value=\"patient billing account\"/&gt;&lt;/coding&gt;&lt;text value=\"patient\"/&gt;&lt;/type&gt;&lt;name value=\"HACC Funded Billing for Peter James Chalmers\"/&gt;&lt;subject&gt;&lt;reference value=\"Patient/example\"/&gt;&lt;display value=\"Peter James Chalmers\"/&gt;&lt;/subject&gt;&lt;servicePeriod&gt;&lt;start value=\"2016-01-01T08:00:00+08:00\"/&gt;&lt;end value=\"2016-06-30T08:00:00+08:00\"/&gt;&lt;/servicePeriod&gt;&lt;coverage&gt;&lt;coverage&gt;&lt;reference value=\"Coverage/7546D\"/&gt;&lt;/coverage&gt;&lt;priority value=\"1\"/&gt;&lt;/coverage&gt;&lt;owner&gt;&lt;reference value=\"Organization/hl7\"/&gt;&lt;/owner&gt;&lt;description value=\"Hospital charges\"/&gt;&lt;/Account&gt;\n    *\n    * @apiError (Error Not Found 404 Content-Type: application/fhir+json) {object} FHIR-JSON-RESOURCE\n    * @apiErrorExample {json} (404) name: Not-Found-Response Content-Type: application/fhir+json\n    {\n        \"resourceType\": \"OperationOutcome\",\n        \"issue\": [\n            {\n                \"severity\": \"error\",\n                \"code\": \"exception\",\n                \"diagnostics\": \"not found Account/0a2d866d-0362-4e05-9880-f62d054668cf\"\n            }\n        ]\n    }\n    *\n    * @apiError (Error Not Found 404 Content-Type: application/fhir+xml) {object} FHIR-XML-RESOURCE\n    * @apiErrorExample {xml} (404) name: Not-Found-Response-XML Content-Type: application/fhir+xml\n    &lt;OperationOutcome xmlns='http://hl7.org/fhir'&gt;\n    &lt;issue&gt;\n        &lt;severity value='error'/&gt;\n        &lt;code value='exception'/&gt;\n        &lt;diagnostics value='not found Account/0a2d866d-0362-4e05-9880-f62d054668cf'/&gt;\n    &lt;/issue&gt;\n    &lt;/OperationOutcome&gt;\n    *\n    */\n</code></pre></li> <li>\u4f7f\u7528\u4ee5\u4e0b\u6307\u4ee4\u5728<code>docs/apidoc/redoc</code>\u7522\u751f openAPI \u6587\u4ef6 <pre><code>node docs/getAPIDocOpenapi.js\n</code></pre> \u7bc4\u4f8b\uff1a <pre><code>{\n\"openapi\": \"3.0.0\",\n\"servers\": [\n{\n\"url\": \"https://dev.burni.xn--7-c56d.com/\"\n}\n],\n\"info\": {\n\"title\": \"Burni API documentation\",\n\"version\": \"v2.1.0\",\n\"description\": \"Documentation for the REST API\"\n},\n\"paths\": {\n\"/fhir/Account/{id}\": {\n\"get\": {\n\"operationId\": \"readAccount\",\n\"tags\": [\n\"Account\"\n],\n\"summary\": \"read Account resource by id.\",\n\"parameters\": [\n{\n\"name\": \"id\",\n\"in\": \"path\",\n\"required\": true,\n\"schema\": {\n\"type\": \"string\"\n},\n\"description\": \"Resource ID in server\"\n}\n],\n\"responses\": {\n\"200\": {\n\"description\": \"successful operation\",\n\"content\": {\n\"application/fhir+json\": {\n\"schema\": {\n\"type\": \"object\",\n\"items\": {\n\"$ref\": \"#/components/schemas/FHIR-XML-RESOURCE\"\n}\n},\n\"examples\": {\n\"Success-Response\": {\n\"value\": {\n\"resourceType\": \"Account\",\n\"id\": \"0a2d866d-0362-4e05-9880-f62d054668cf\",\n\"identifier\": [\n{\n\"system\": \"urn:oid:0.1.2.3.4.5.6.7\",\n\"value\": \"654321\"\n}\n],\n\"status\": \"active\",\n\"type\": {\n\"coding\": [\n{\n\"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\",\n\"code\": \"PBILLACCT\",\n\"display\": \"patient billing account\"\n}\n],\n\"text\": \"patient\"\n},\n\"name\": \"HACC Funded Billing for Peter James Chalmers\",\n\"subject\": [\n{\n\"reference\": \"Patient/example\",\n\"display\": \"Peter James Chalmers\"\n}\n],\n\"servicePeriod\": {\n\"start\": \"2016-01-01T08:00:00+08:00\",\n\"end\": \"2016-06-30T08:00:00+08:00\"\n},\n\"coverage\": [\n{\n\"coverage\": {\n\"reference\": \"Coverage/7546D\"\n},\n\"priority\": 1\n}\n],\n\"owner\": {\n\"reference\": \"Organization/hl7\"\n},\n\"description\": \"Hospital charges\",\n\"meta\": {\n\"tag\": [\n{\n\"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActReason\",\n\"code\": \"HTEST\",\n\"display\": \"test health data\"\n}\n],\n\"versionId\": \"1\",\n\"lastUpdated\": \"2022-02-13T22:30:14.037+08:00\"\n}\n}\n}\n}\n},\n\"application/fhir+xml\": {\n\"schema\": {\n\"type\": \"object\",\n\"items\": {\n\"$ref\": \"#/components/schemas/FHIR-XML-RESOURCE\"\n},\n\"xml\": {\n\"name\": \"Account\"\n}\n},\n\"examples\": {\n\"Success-Response-XML\": {\n\"value\": \"&lt;?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?&gt;&lt;Account xmlns=\\\"http://hl7.org/fhir\\\"&gt;&lt;id value=\\\"69efa3c0-73b1-4403-ba4b-ffd7b718d053\\\"/&gt;&lt;meta&gt;&lt;versionId value=\\\"1\\\"/&gt;&lt;lastUpdated value=\\\"2022-02-17T17:34:51.348+08:00\\\"/&gt;&lt;tag&gt;&lt;system value=\\\"http://terminology.hl7.org/CodeSystem/v3-ActReason\\\"/&gt;&lt;code value=\\\"HTEST\\\"/&gt;&lt;display value=\\\"test health data\\\"/&gt;&lt;/tag&gt;&lt;/meta&gt;&lt;identifier&gt;&lt;system value=\\\"urn:oid:0.1.2.3.4.5.6.7\\\"/&gt;&lt;value value=\\\"654321\\\"/&gt;&lt;/identifier&gt;&lt;status value=\\\"active\\\"/&gt;&lt;type&gt;&lt;coding&gt;&lt;system value=\\\"http://terminology.hl7.org/CodeSystem/v3-ActCode\\\"/&gt;&lt;code value=\\\"PBILLACCT\\\"/&gt;&lt;display value=\\\"patient billing account\\\"/&gt;&lt;/coding&gt;&lt;text value=\\\"patient\\\"/&gt;&lt;/type&gt;&lt;name value=\\\"HACC Funded Billing for Peter James Chalmers\\\"/&gt;&lt;subject&gt;&lt;reference value=\\\"Patient/example\\\"/&gt;&lt;display value=\\\"Peter James Chalmers\\\"/&gt;&lt;/subject&gt;&lt;servicePeriod&gt;&lt;start value=\\\"2016-01-01T08:00:00+08:00\\\"/&gt;&lt;end value=\\\"2016-06-30T08:00:00+08:00\\\"/&gt;&lt;/servicePeriod&gt;&lt;coverage&gt;&lt;coverage&gt;&lt;reference value=\\\"Coverage/7546D\\\"/&gt;&lt;/coverage&gt;&lt;priority value=\\\"1\\\"/&gt;&lt;/coverage&gt;&lt;owner&gt;&lt;reference value=\\\"Organization/hl7\\\"/&gt;&lt;/owner&gt;&lt;description value=\\\"Hospital charges\\\"/&gt;&lt;/Account&gt;\"\n}\n}\n}\n}\n},\n\"404\": {\n\"description\": \"error\",\n\"content\": {\n\"application/fhir+json\": {\n\"schema\": {\n\"type\": \"object\",\n\"items\": {\n\"$ref\": \"#/components/schemas/FHIR-XML-RESOURCE\"\n}\n},\n\"examples\": {\n\"Not-Found-Response\": {\n\"value\": {\n\"resourceType\": \"OperationOutcome\",\n\"issue\": [\n{\n\"severity\": \"error\",\n\"code\": \"exception\",\n\"diagnostics\": \"not found Account/0a2d866d-0362-4e05-9880-f62d054668cf\"\n}\n]\n}\n}\n}\n},\n\"application/fhir+xml\": {\n\"schema\": {\n\"type\": \"object\",\n\"items\": {\n\"$ref\": \"#/components/schemas/FHIR-XML-RESOURCE\"\n},\n\"xml\": {\n\"name\": \"OperationOutcome\"\n}\n},\n\"examples\": {\n\"Not-Found-Response-XML\": {\n\"value\": \"&lt;OperationOutcome xmlns='http://hl7.org/fhir'&gt;\\n&lt;issue&gt;\\n    &lt;severity value='error'/&gt;\\n    &lt;code value='exception'/&gt;\\n    &lt;diagnostics value='not found Account/0a2d866d-0362-4e05-9880-f62d054668cf'/&gt;\\n&lt;/issue&gt;\\n&lt;/OperationOutcome&gt;\"\n}\n}\n}\n}\n}\n},\n\"x-codeSamples\": [\n{\n\"lang\": \"Shell\",\n\"source\": \"#example from: https://chinlinlee.github.io/Burni/assets/FHIR/fhir-resource-examples/account-example.json\\ncurl --location --request GET 'http://burni.example.com/fhir/Account/0a2d866d-0362-4e05-9880-f62d054668cf'\",\n\"label\": \"cURL\"\n},\n{\n\"lang\": \"JavaScript\",\n\"source\": \" //example from: https://chinlinlee.github.io/Burni/assets/FHIR/fhir-resource-examples/account-example.json\\nconst axios = require('axios');\\nconst config = {\\n    method: 'get',\\n    url: 'http://burni.example.com/fhir/Account/0a2d866d-0362-4e05-9880-f62d054668cf'\\n};\\n\\naxios(config)\\n.then(function (response) {\\n    console.log(JSON.stringify(response.data));\\n})\\n.catch(function (error) {\\n    console.log(error);\\n});\",\n\"label\": \"javascript Axios\"\n}\n]\n}\n}\n},\n\"components\": {\n\"schemas\": {\n\"FHIR-JSON-RESOURCE\": {\n\"properties\": {}\n},\n\"FHIR-XML-RESOURCE\": {\n\"properties\": {}\n},\n\"readAccount\": {\n\"properties\": {\n\"id\": {\n\"type\": \"string\",\n\"description\": \"Resource ID in server\"\n}\n},\n\"required\": [\n\"id\"\n]\n}\n}\n}\n}\n</code></pre></li> </ul>"},{"location":"FHIR%20API%20Documentation/Overview/","title":"FHIR API \u6587\u4ef6\u6982\u89c0","text":"<p>Burni \u76ee\u524d\u652f\u63f4\u7684 FHIR RESTful API \u5982\u4e0b\uff1a</p>"},{"location":"FHIR%20API%20Documentation/Overview/#instance-level-interactions","title":"Instance Level Interactions","text":"<ul> <li>read</li> <li>vread</li> <li>update</li> <li>delete</li> <li>history</li> </ul>"},{"location":"FHIR%20API%20Documentation/Overview/#type-level-interactions","title":"Type Level Interactions","text":"<ul> <li>create</li> <li>search</li> </ul>"},{"location":"FHIR%20API%20Documentation/Overview/#whole-system-interactions","title":"Whole System Interactions","text":"<p>None</p>"},{"location":"FHIR%20Validator/","title":"FHIR Validator","text":"<p>Burni \u7684 FHIR Validator \u900f\u904e Node.js \u8207 Java \u878d\u5408\u7684\u5c08\u6848 node-java-fhir-validator \u5be6\u73fe</p> <p>\u6ce8\u610f\u4e8b\u9805</p> <p>node-java-fhir-validator \u8acb\u4f7f\u7528 0.2.0 \u7248\u672c\uff0c\u5f8c\u7e8c\u7248\u672c\u9084\u672a\u6574\u5408\u81f3 Burni</p> <ul> <li>node-java-fhir-validator 0.2.0 \u7248\u672c\u4f7f\u7528 joeferner / node-java</li> <li>\u5f8c\u7e8c\u7248\u672c\u5247\u662f\u4f7f\u7528 node-java-bridge \u91cd\u73fe fhir-validator-wrapper \u7684\u529f\u80fd</li> </ul> <ul> <li>Burni \u653e\u7f6e FHIR Validator \u7684\u8def\u5f91: <code>utils/validator</code><ul> <li><code>index.js</code>: \u521d\u59cb\u5316\u5f15\u5165 <code>utils/validator/igs</code> \u8cc7\u6599\u593e\u4e2d\u7684 StructureDefinition (profile json file) \u548c xxx.package.tgz (ig tgz file) \u5230 validator \u7684\u7a0b\u5f0f\u78bc</li> <li><code>processor.js</code>: \u5be6\u4f5c <code>validateResource</code> \u7684\u7a0b\u5f0f\u78bc</li> </ul> </li> </ul>"},{"location":"FHIR%20Validator/#api-fhir-validator","title":"\u54ea\u4e9b API \u4f7f\u7528\u4e86 FHIR Validator?","text":"<ul> <li>create: \u7576 POST \u8cc7\u6599\u6642\uff0c\u6703\u5148\u9032\u884c\u9a57\u8b49\uff0c\u9a57\u8b49\u901a\u904e\u624d\u6703\u9032\u884c create\uff0c\u53cd\u4e4b\u56de\u50b3 422 \u932f\u8aa4</li> <li>update: \u7576 PUT \u8cc7\u6599\u6642\uff0c\u6703\u5148\u9032\u884c\u9a57\u8b49\uff0c\u9a57\u8b49\u901a\u904e\u624d\u6703\u9032\u884c update\uff0c\u53cd\u4e4b\u56de\u50b3 422 \u932f\u8aa4</li> <li>$validate: \u9a57\u8b49\u529f\u80fd\uff0c\u901a\u904e\u8fd4\u56de 200\uff0c\u53cd\u4e4b\u56de\u50b3 422 \u932f\u8aa4</li> </ul>"},{"location":"Getting%20started/Configuration/","title":"Configuration","text":""},{"location":"Getting%20started/Configuration/#configconfigjs","title":"config\\config.js","text":"<pre><code>module.exports = {\n// add the resource name that you need\n\"Patient\" : { \"interaction\": {\n\"read\": true,\n\"vread\": true,\n\"update\": true,\n\"delete\": true,\n\"history\": true,\n\"create\": true,\n\"search\": true\n}\n}\n}\n</code></pre> <p>Note</p> <p>\u6b64\u6a94\u6848\u5728\u8a2d\u5b9a\u60a8\u6240\u60f3\u652f\u63f4\u7684FHIR Resources(\u8cc7\u6e90)\u3002</p> <p>\u5982\u679c\u60a8\u60f3\u652f\u63f4\u6240\u6709\u7684FHIR Resources(\u8cc7\u6e90)\uff0c\u60a8\u53ef\u4ee5\u57f7\u884c\u4ee5\u4e0b\u6307\u4ee4\uff1a <pre><code>node config/generate-allResources.js\n</code></pre> \u57f7\u884c\u6307\u4ee4\u5c07\u6703\u7522\u751f\u5df2\u8a2d\u5b9a\u6240\u6709FHIR Resource(\u8cc7\u6e90)\u7684config.js\u6a94\u6848</p>"},{"location":"Getting%20started/Configuration/#dotenv","title":"dotenv","text":"<p><code>.env</code> \u65bc\u5c08\u6848\u6839\u76ee\u9304 <pre><code>MONGODB_NAME=\"dbName\"\nMONGODB_HOSTS=[\"mongodb\"]\nMONGODB_PORTS=[27017]\nMONGODB_USER=\"myAdmin\"\nMONGODB_PASSWORD=\"MymongoAdmin1\"\nMONGODB_IS_SHARDING_MODE=false\nMONGODB_SLAVEMODE=false\n\nSERVER_PORT=8080 \n\nFHIRSERVER_HOST=\"localhost\"\nFHIRSERVER_PORT=8080 #use by creating bundle url\nFHIRSERVER_APIPATH=\"fhir\"\n\n#If u want to use token auth, add below.\nENABLE_TOKEN_AUTH=true\nADMIN_LOGIN_PATH=\"adminLogin\"  \nADMIN_USERNAME=\"adminUsername\"\nADMIN_PASSWORD=\"adminPassword\"\n\nENABLE_CHECK_ALL_RESOURCE_ID=false #true that want to check resource id cross all resource\nENABLE_CHECK_REFERENCE #true that want to check reference is exist in resource content\n\nENABLE_CSHARP_VALIDATOR=false \nVALIDATION_FILES_ROOT_PATH=\"FHIRValidatorAPI/FHIRValidatorAPI/assets/validationResources\" # Please config the path corresponded to CSharp assets/validationResources directory\nVALIDATION_API_URL=\"https://localhost:44381/api/validate\"\n</code></pre></p>"},{"location":"Getting%20started/Configuration/#_1","title":"\u7522\u751f\u7a0b\u5f0f\u78bc","text":"<p>\u5982\u679c\u60a8\u5df2\u5b8c\u6210\u4ee5\u4e0a\u7684\u8a2d\u5b9a\uff0c\u60a8\u5fc5\u9808\u57f7\u884c\u4ee5\u4e0b\u6307\u4ee4\u7522\u751f Mongoose Model\u3001API \u7a0b\u5f0f\u78bc\u8b93 Burni \u6b63\u5e38\u904b\u4f5c\u3002 <pre><code>npm run build\n</code></pre></p> <p>Warning</p> <p><code>TypeError: genParamFunc[type] is not a function</code> \u4ee3\u8868\u6b64\u985e\u578b\u7684\u641c\u5c0b\u53c3\u6578\u76ee\u524d\u4e0d\u652f\u63f4\u3002</p>"},{"location":"Getting%20started/Deploy/","title":"\u90e8\u5c6c","text":""},{"location":"Getting%20started/Deploy/#nodejs","title":"\u4f7f\u7528 Node.JS","text":"<p><pre><code>node server.js\n</code></pre> \u60a8\u6703\u770b\u5230 console \u6253\u5370\u4ee5\u4e0b\u8a0a\u606f\uff1a <pre><code>mongodb://localhost:27017/dbName\nmoduleName ::  Patient\npath :  path\\burni\\models\\mongodb/model\nmoduleName ::  Patient_history\npath :  path\\burni\\models\\mongodb/model\nmoduleName ::  FHIRStoredID\npath :  path\\burni\\models\\mongodb/staticModel\nmoduleName ::  issuedToken\npath :  path\\burni\\models\\mongodb/staticModel\nhttp server is listening on port:8089\nwe're connected!\n</code></pre></p>"},{"location":"Getting%20started/Deploy/#docker-compose","title":"\u4f7f\u7528 docker-compose","text":"<p>\u4ee5\u4e0b\u662f\u4f86\u81ea\u6839\u76ee\u9304 <code>docker-compose.yaml</code> \u7684\u7bc4\u4f8b <pre><code>version: '3.4'\nservices:\nfhir-burni-mongodb:\nimage: mongo:4.2\ncontainer_name : fhir-burni-mongodb\nrestart: always\nports:\n- 27017:27017\nvolumes:\n- ./mongodb/db:/data/db\nenvironment:\n# provide your credentials here\n- MONGO_INITDB_DATABASE=admin\n- MONGO_INITDB_ROOT_USERNAME=root\n- MONGO_INITDB_ROOT_PASSWORD=root\n- MONGO_PORT=27017\nfhir-burni:\nbuild: ./\ncontainer_name: fhir-burni\ncommand: &gt;\n/bin/sh -c '\nwhile ! nc -z fhir-burni-mongodb 27017;\ndo\necho \"waiting for database ...\";\nsleep 3;\ndone;\necho \"db is ready!\";\npm2-runtime start ecosystem.config.js;\n'\nvolumes :\n- ./:/nodejs/fhir-burni\n- /nodejs/fhir-burni/node_modules\nports:\n- 8080:8080\ndepends_on:\n- fhir-burni-mongodb\ntty : true\nrestart: on-failure:3\nstdin_open : true\n</code></pre></p>"},{"location":"Getting%20started/Deploy/#docker-compose_1","title":"docker-compose\u90e8\u5c6c","text":"<pre><code>docker-compose up -d\n</code></pre>"},{"location":"Getting%20started/Installation/","title":"Installation","text":"<p>\u8acb\u78ba\u8a8d\u60a8\u7684\u74b0\u5883\u6709\u4ee5\u4e0b\u5167\u5bb9\uff1a</p> <ul> <li>git</li> <li>Node.JS</li> <li>MongoDB &gt; 4.2</li> </ul>"},{"location":"Getting%20started/Installation/#git","title":"\u4f7f\u7528 git","text":"<ul> <li>\u5f9e git \u8907\u88fd\u5c08\u6848</li> </ul> bash <pre><code>git clone https://github.com/Chinlinlee/Burni.git\n</code></pre> <ul> <li>\u5b89\u88dd\u5957\u4ef6</li> </ul> bash <pre><code>npm install\n</code></pre> <p>\u5b89\u88dd\u5b8c\u7562\u5f8c\uff0c\u4e0b\u4e00\u6b65\u9032\u884c\u8a2d\u5b9a</p>"},{"location":"How%20Burni%20Work/","title":"How Burni Work","text":"<p>\u672c\u7ae0\u7bc0\u5c07\u544a\u8a34\u4f60 Burni \u7684\u5de5\u4f5c\u539f\u7406</p>"},{"location":"How%20Burni%20Work/#mongoose-model-generator","title":"Mongoose Model Generator","text":"<ul> <li>Burni \u7684 Mongoose Model \u4e3b\u8981\u7531 FHIR \u63d0\u4f9b\u7684 FHIR JSON Schema \u5206\u6790\u7522\u751f\u800c\u6210</li> <li>\u9996\u5148\uff0c\u56e0\u70ba FHIR \u5e95\u5c64\u90fd\u662f\u4ee5 Primitive Type (e.g. string, integer, boolean \u7b49)\u7d44\u6210\uff0c\u6240\u4ee5\u8981\u5148\u7522\u751f Primitive Type \u7684\u7a0b\u5f0f\u78bc<ul> <li>\u4e0d\u904e\uff0cBurni \u5df2\u7d93\u662f\u7a0b\u5f0f\u78bc\u7522\u751f\u5b8c\u7562\uff0c\u82e5\u6709\u8208\u8da3or\u6838\u5fc3\u51fa\u554f\u984c\u8acb\u81ea\u884c\u67e5\u770b\u539f\u59cb\u78bc</li> <li>\u4e3b\u8981\u7a0b\u5f0f\u78bc\u53ef\u4ee5\u5728 <code>FHIR-mongoose-Models-Generator/PrimitiveGenerator.js</code> \u4e2d\u627e\u5230</li> </ul> </li> <li>\u5176\u9918\u8cc7\u6599\u578b\u614b (i.e. General-Purpose, Metadata \u4ee5\u53ca Special Purpose) \u4e5f\u5df2\u7d93\u88ab\u7522\u751f\uff0c\u82e5\u6709\u8208\u8da3or\u6838\u5fc3\u51fa\u554f\u984c\u8acb\u81ea\u884c\u67e5\u770b\u539f\u59cb\u78bc<ul> <li>\u4e3b\u8981\u7a0b\u5f0f\u78bc\u53ef\u4ee5\u5728 <code>FHIR-mongoose-Models-Generator/ComplexGenerator.js</code> \u4e2d\u627e\u5230</li> </ul> </li> <li>Resource Type: \u6b64\u70ba Burni \u7522\u751f Mongoose \u4e3b\u8981\u7684 Data Type<ul> <li>Burni \u6703\u5728\u4f60 <code>config/config.js</code> \u8a2d\u5b9a\u7684\u6b04\u4f4d\u9032\u884c\u7522\u751f\u76f8\u5c0d\u61c9 Resource Type \u7684 Schema \u7a0b\u5f0f\u78bc</li> <li>\u4e3b\u8981\u7a0b\u5f0f\u78bc\u53ef\u4ee5\u5728 <code>FHIR-mongoose-Models-Generator/resourceGenerator.js</code> \u4e2d\u627e\u5230</li> <li>\u7522\u751f\u7684 Schema \u90fd\u6703\u653e\u5728 <code>models/mongodb/model</code> \u7576\u4e2d</li> </ul> </li> </ul>"},{"location":"How%20Burni%20Work/#api-generator","title":"API Generator","text":"<ul> <li>Burni \u6703\u5c0d\u4f60\u5728 <code>config/config.js</code> \u8a2d\u5b9a\u7684 Resource Type\uff0c\u7522\u751f\u4e0d\u540c\u7684 controller</li> <li>\u4e3b\u8981\u7a0b\u5f0f\u78bc\u53ef\u4ee5\u5728 <code>api_generator/API_Generator_V2.js</code> \u627e\u5230</li> <li> <p>\u57fa\u672c\u7684 controller \u5982\u4e0b <pre><code>const create = require('../../../FHIRApiService/create');\nmodule.exports = async function(req, res) {\nreturn await create(req, res, \"Account\");\n};\n</code></pre></p> <ul> <li>\u4f60\u53ef\u4ee5\u767c\u73fe\u6240\u6709\u7522\u751f\u51fa\u4f86\u7684\u90fd\u53ea\u6703\u6307\u5411\u4e00\u500b function\uff0c\u9019\u662f\u56e0\u70ba\u8981\u8b93\u958b\u767c\u8005\u80fd\u5920\u5f48\u6027\u7684\u5728\u4e0d\u540c\u7684 Resource Type \u66f4\u6539\u5176 controller (e.g. \u589e\u52a0\u524d\u8655\u7406)</li> </ul> </li> </ul>"},{"location":"How%20Burni%20Work/#search-parameter-generator","title":"Search Parameter Generator","text":"<ul> <li>Burni \u6700\u8907\u96dc\u7684\u5c31\u662f Search Parameter \u7684\u7522\u751f</li> <li>\u900f\u904e Search Parameter Registry \u6293\u53d6\u6240\u6709\u7684 Search Parameter</li> <li>\u7136\u5f8c\u5c07\u6bcf\u500b Search Parameter \u505a\u8cc7\u6599\u6574\u7406\u8b8a\u6210 <code>api_generator/FHIRParametersClean.json</code> \u6a94\u6848</li> <li>\u6bcf\u500b Search Parameter \u90fd\u6709 Type\uff0c\u900f\u904e Type \u53bb\u7522\u751f\u5c0d\u61c9\u7684\u7a0b\u5f0f\u78bc<ul> <li>\u4e3b\u8981\u7a0b\u5f0f\u78bc\u53ef\u4ee5\u5728 <code>api_generator/searchParametersCodeGenerator.js</code> \u4ee5\u53ca <code>api_generator/parameterHandler.js</code> \u627e\u5230</li> </ul> </li> </ul>"},{"location":"How%20Burni%20Work/#search-parameter","title":"Search Parameter","text":"<ul> <li>\u6bcf\u500b Resource Type \u7684 Search Parameter \u8655\u7406\u5668\u90fd\u53ef\u4ee5\u5728 <code>api/FHIR/${ResourceType}/${ResourceType}ParametersHandler.js</code> \u627e\u5230</li> <li>\u6bcf\u7a2e Search Parameter \u7684\u6838\u5fc3\u7d44\u6210 MongoDB Query \u7684\u7a0b\u5f0f\u78bc\u53ef\u4ee5\u5728 <code>models/FHIR/searchParameterQueryHandler.js</code> \u4ee5\u53ca <code>models/FHIR/queryBuild.js</code></li> </ul>"},{"location":"How%20Burni%20Work/#apis","title":"APIs","text":"<ul> <li>Burni \u6bcf\u4e00\u500b API \u4e3b\u8981\u64cd\u4f5c\u53ef\u4ee5\u5728 <code>api/FHIRApiService</code> \u4e2d\u627e\u5230\uff0c\u4e26\u4e14\u6bcf\u500b\u6a94\u6848\u540d\u7a31\u57fa\u672c\u90fd\u8207 FHIR \u5b98\u65b9\u6240\u63d0\u4f9b\u7684\u540d\u7a31\u4e00\u6a23</li> </ul>"},{"location":"SearchParameter/Add_SearchParameter/","title":"\u81ea\u884c\u65b0\u589e\u641c\u5c0b\u53c3\u6578","text":"<p>\u8207\u641c\u5c0b\u53c3\u6578\u76f8\u95dc\u7684\u7a0b\u5f0f\u78bc\u4f4d\u65bc<code>models\\FHIR\\queryBuild.js</code> \u4ee5\u53ca <code>models\\FHIR\\searchParameterQueryHandler.js</code> \u6a94\u6848\u3002 </p> <ul> <li><code>queryBuild.js</code>: \u6839\u64da\u4e0d\u540c\u7684 Data Type \u7d44\u6210\u55ae\u500bMongoDB \u67e5\u8a62\u8a9e\u6cd5\u3002</li> <li><code>searchParameterQueryHandler.js</code>: \u6839\u64da HTTP \u7db2\u5740\u4e2d\u7684\u67e5\u8a62\u689d\u4ef6\u4f7f\u7528 <code>queryBuild.js</code> \u53d6\u5f97\u5b8c\u6574\u7684 MongoDB \u67e5\u8a62\u8a9e\u6cd5\u3002</li> </ul> <p>\u7531\u7522\u751f\u5668\u7522\u751f\u4e4b\u90e8\u5206\u641c\u5c0b\u53c3\u6578\u53ef\u80fd\u662f\u932f\u8aa4\u7684\u6216\u907a\u5931\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 <code>models\\FHIR\\searchParameterQueryHandler.js</code> \u5167\u7684\u65b9\u6cd5\u4fee\u6b63\u3002</p>"},{"location":"SearchParameter/Add_SearchParameter/#bundlecomposition","title":"\u7bc4\u4f8b\uff1a Bundle.composition","text":"<p>\u5728\u4e00\u4e9b\u4f7f\u7528\u6848\u4f8b\uff0c\u60a8\u4e5f\u8a31\u6703\u60f3\u4f7f\u7528 bundle \u7684 <code>entry.resource.subject.reference</code> \u641c\u5c0b <code>patient/{id}</code>\u3002</p> <ul> <li>The example URL: <pre><code>http://localhost:8080/fhir/Bundle?composition.patient=Patient/123\n</code></pre> \u5982\u679c\u60a8\u60f3\u652f\u63f4\u6b64\u9805\u641c\u5c0b\u53c3\u6578\uff0c\u60a8\u53ef\u4ee5\u5728 <code>api/FHIR/Bundle/BundleParametersHandler.js</code> \u6a94\u6848\u65b0\u589e\u4ee5\u4e0b\u7a0b\u5f0f\u78bc <pre><code>//#region composition.patient\n// search parameter name: \"composition.patient\"\n// field in resource: \"entry.resource.subject.reference\"\n// type: reference\nparamsSearchFields[\"composition.patient\"]= [\"entry.resource.subject.reference\"];\nparamsSearch[\"composition.patient\"] = (query) =&gt; {\ntry {\nqueryHandler.getReferenceQuery(query, paramsSearchFields, \"composition.patient\");\n} catch (e) {\nconsole.error(e);\nthrow e;\n}\n};\n//#endregion\n</code></pre></li> </ul>"},{"location":"SearchParameter/Overview/","title":"\u641c\u5c0b\u53c3\u6578\u6982\u89c0","text":"<p>Burni \u76ee\u524d\u652f\u63f4\u7684 FHIR search operations \u5982\u4e0b:</p>"},{"location":"SearchParameter/Overview/#search-parameter-types","title":"Search Parameter Types","text":"<ul> <li>Number</li> <li>Date/DateTime</li> <li>String</li> <li>Token</li> <li>Reference</li> </ul>"},{"location":"SearchParameter/Overview/#parameters-for-all-resources","title":"Parameters for all resources","text":"<ul> <li>_id</li> <li>_lastUpdated</li> </ul>"},{"location":"SearchParameter/Overview/#search-result-parameters","title":"Search result parameters","text":"<ul> <li>_count</li> </ul> <p>Info</p> <p>\u4e0b\u4e00\u7ae0\u60a8\u5c07\u6703\u77e5\u9053\u5982\u4f55\u4fee\u6b63 Burni \u907a\u5931\u6216\u932f\u8aa4\u7684\u641c\u5c0b\u53c3\u6578\u3002\u4e0b\u4e00\u7ae0\u81ea\u884c\u65b0\u589e\u641c\u5c0b\u53c3\u6578</p>"}]}