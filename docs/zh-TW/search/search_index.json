{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Burni documentation \ud83d\udea7 \u6b63\u5728\u9032\u884c\u4e2d... \u8b93\u6211\u5011\u958b\u59cb\u5427 \u5b89\u88dd \u8a2d\u5b9a \u90e8\u5c6c","title":"Home"},{"location":"#burni-documentation","text":"","title":"Burni documentation"},{"location":"#_1","text":"","title":"\ud83d\udea7 \u6b63\u5728\u9032\u884c\u4e2d..."},{"location":"#_2","text":"\u5b89\u88dd \u8a2d\u5b9a \u90e8\u5c6c","title":"\u8b93\u6211\u5011\u958b\u59cb\u5427"},{"location":"Introduction/","text":"\u4ecb\u7d39 Burni FHIR Server Burni \u4f7f\u7528 Node.JS \u3001Express \u6846\u67b6\u4ee5\u53ca MongoDB \u5be6\u4f5c FHIR R4 Server\uff0c\u7d93\u7531\u7c21\u55ae\u7684\u8a2d\u5b9a\u5373\u53ef\u7522\u751f\u6307\u5b9a FHIR Resource\u7684 Mongoose Schema\u3001API\u7a0b\u5f0f\u78bc\u4e26\u53ef\u81ea\u884c\u66f4\u6539\uff0c\u6eff\u8db3\u9700\u6c42\u3002\u76ee\u524dBurni\u652f\u63f4Windows\u4ee5\u53caLinux\uff0c\u8b93\u958b\u767c\u4eba\u54e1\u53ef\u4ee5\u5feb\u901f\u67b6\u8a2d FHIR Server\u3002 Burni \u6240\u4f7f\u7528\u7684 FHIR \u7248\u672c\u70ba v4.0.1\u3002 Server \u80fd\u529b\u8072\u660e Burni \u4f7f\u7528 AEGIS Touchstone Basic-R4-Server \u6e2c\u8a66. \u6e2c\u8a66\u7d50\u679c: FHIR4-0-1-Basic-Server version 18 (2,216 tests has been passed, 100% Pass) FHIR4-0-1-Basic-Server version 14 (1,948 tests has been passed, 100% Pass)","title":"\u4ecb\u7d39"},{"location":"Introduction/#_1","text":"","title":"\u4ecb\u7d39"},{"location":"Introduction/#burni-fhir-server","text":"Burni \u4f7f\u7528 Node.JS \u3001Express \u6846\u67b6\u4ee5\u53ca MongoDB \u5be6\u4f5c FHIR R4 Server\uff0c\u7d93\u7531\u7c21\u55ae\u7684\u8a2d\u5b9a\u5373\u53ef\u7522\u751f\u6307\u5b9a FHIR Resource\u7684 Mongoose Schema\u3001API\u7a0b\u5f0f\u78bc\u4e26\u53ef\u81ea\u884c\u66f4\u6539\uff0c\u6eff\u8db3\u9700\u6c42\u3002\u76ee\u524dBurni\u652f\u63f4Windows\u4ee5\u53caLinux\uff0c\u8b93\u958b\u767c\u4eba\u54e1\u53ef\u4ee5\u5feb\u901f\u67b6\u8a2d FHIR Server\u3002 Burni \u6240\u4f7f\u7528\u7684 FHIR \u7248\u672c\u70ba v4.0.1\u3002","title":"Burni FHIR Server"},{"location":"Introduction/#server","text":"Burni \u4f7f\u7528 AEGIS Touchstone Basic-R4-Server \u6e2c\u8a66. \u6e2c\u8a66\u7d50\u679c: FHIR4-0-1-Basic-Server version 18 (2,216 tests has been passed, 100% Pass) FHIR4-0-1-Basic-Server version 14 (1,948 tests has been passed, 100% Pass)","title":"Server \u80fd\u529b\u8072\u660e"},{"location":"Code%20API%20Documentation/models/FHIR/searchParameterQueryHandler/","text":"searchParameterQueryHandler \u6b64\u6a94\u6848\u4f4d\u65bc models/FHIR/ . Functions getStringQuery(query, paramsSearchFields, queryFieldName) getAddressQuery(query, queryFieldName) getNameQuery(query, queryFieldName) getTokenQuery(query, paramsSearchFields, queryFieldName) getPolyTokenQuery(query, paramsSearchFields, queryFieldName, paramsSearchFunc) getNumberQuery(query, paramsSearchFields, queryFieldName) getPolyDateQuery(query, paramsSearchFields, queryFieldName, paramsSearchFunc) getStringQuery(query, paramsSearchFields, queryFieldName) Kind : global function Param Type Description query string The request query object paramsSearchFields Array.<string> The fields of search parameter that in resource queryFieldName string The name of search parameter Example (Example of `address-city` of search parameter of the Patient resource) // refresh query object to // { // \"$and\": [ // { // \"$or\": [ // { // \"address.city\": { // \"$regex\": /^PleasantVille/gi // } // } // ] // } // ] // } getStringQuery ( { \"address-city\" : \"PleasantVille\" , \"gender\" : \"male\" , \"$and\" : [] }, [ \"address.city\" ], \"address-city\" ); getAddressQuery(query, queryFieldName) Kind : global function Param Type Description query string The request query object queryFieldName string The name of search parameter Example (Example of `address` of search parameter of the Patient resource) // refresh query object to // { // \"$and\": [ // { // \"$or\": [ // { // \"address.line\": { // \"$regex\": /^PleasantVille/gi // } // }, // { // \"address.city\": { // \"$regex\": /^PleasantVille/gi // } // }, // { // \"address.district\": { // \"$regex\": /^PleasantVille/gi // } // }, // { // \"address.state\": { // \"$regex\": /^PleasantVille/gi // } // }, // { // \"address.postalCode\": { // \"$regex\": /^PleasantVille/gi // } // }, // { // \"address.country\": { // \"$regex\": /^PleasantVille/gi // } // } // ] // } // ] // } getAddressQuery ( { \"address\" : \"PleasantVille\" , \"gender\" : \"male\" , \"$and\" : [] }, \"address\" ); getNameQuery(query, queryFieldName) Kind : global function Param Type Description query string The request query object queryFieldName string The name of search parameter Example (Example of `name` of search parameter of the Patient resource) // refresh query object to // { // \"$and\": [ // { // \"$or\": [ // { // \"$or\": [ // { // \"name.text\": { // \"$regex\": /^Chalmers/gi // } // }, // { // \"name.family\": { // \"$regex\": /^Chalmers/gi // } // }, // { // \"name.given\": { // \"$regex\": /^Chalmers/gi // } // }, // { // \"name.suffix\": { // \"$regex\": /^Chalmers/gi // } // }, // { // \"name.prefix\": { // \"$regex\": /^Chalmers/gi // } // } // ] // } // ] // } // ] // } Example getNameQuery ( { \"name\" : \"Chalmers\" }, [ \"name\" ], \"name\" ); getTokenQuery(query, paramsSearchFields, queryFieldName) Kind : global function Param Type Description query string The request query object that in resource paramsSearchFields Array.<string> The fields of search parameter that in resource queryFieldName string The name of search parameter getPolyTokenQuery(query, paramsSearchFields, queryFieldName, paramsSearchFunc) Kind : global function Param Type Description query Object The request query object paramsSearchFields Array.<string> The fields of search parameters that in resource queryFieldName string The name of search parameter paramsSearchFunc function parameter search function corresponds to data type e.g. code, codeable concept Example (Example of `address-use` of search parameter of the Patient resource) // refresh query object to // { // \"$and\": [ // { // \"$or\": [ // { // \"$or\": [ // { // \"address.use.system\": \"home\" //because some data types have system // }, // { // \"address.use\": \"home\" // } // ] // } // ] // } // ] // } getPolyTokenQuery ( { \"address-use\" : \"home\" }, [ \"address.use\" ], \"address-use\" , ( query )=> { try { queryHandler . getStringQuery ( query , paramsSearchFields , * \"address-city\" ); } catch ( e ) { console . error ( e ); throw e ; } }); getNumberQuery(query, paramsSearchFields, queryFieldName) Kind : global function Param Type Description query string The request query object paramsSearchFields Array.<string> The fields of search parameters that in resource queryFieldName string The name of search parameter Example (Example of `variant-start` of search parameter of the Molecularsequence resource) // refresh query object to // { // \"$and\": [ // { // \"$or\": [ // { // \"variant.start\": { // \"$eq\": 22125503 // } // } // ] // } // ] // } getNumberQuery ( { \"$and\" : [], \"variant-start\" : 22125503 }, [ \"variant.start\" ], \"variant-start\" ); getPolyDateQuery(query, paramsSearchFields, queryFieldName, paramsSearchFunc) Kind : global function Param Type Description query Object The request query object paramsSearchFields string The fields of search parameters that in resource queryFieldName string The name of search parameter paramsSearchFunc function parameter search function corresponds to data type e.g. date, dateTime","title":"searchParameterQueryHandler"},{"location":"Code%20API%20Documentation/models/FHIR/searchParameterQueryHandler/#searchparameterqueryhandler","text":"\u6b64\u6a94\u6848\u4f4d\u65bc models/FHIR/ .","title":"searchParameterQueryHandler"},{"location":"Code%20API%20Documentation/models/FHIR/searchParameterQueryHandler/#functions","text":"getStringQuery(query, paramsSearchFields, queryFieldName) getAddressQuery(query, queryFieldName) getNameQuery(query, queryFieldName) getTokenQuery(query, paramsSearchFields, queryFieldName) getPolyTokenQuery(query, paramsSearchFields, queryFieldName, paramsSearchFunc) getNumberQuery(query, paramsSearchFields, queryFieldName) getPolyDateQuery(query, paramsSearchFields, queryFieldName, paramsSearchFunc)","title":"Functions"},{"location":"Code%20API%20Documentation/models/FHIR/searchParameterQueryHandler/#getstringqueryquery-paramssearchfields-queryfieldname","text":"Kind : global function Param Type Description query string The request query object paramsSearchFields Array.<string> The fields of search parameter that in resource queryFieldName string The name of search parameter Example (Example of `address-city` of search parameter of the Patient resource) // refresh query object to // { // \"$and\": [ // { // \"$or\": [ // { // \"address.city\": { // \"$regex\": /^PleasantVille/gi // } // } // ] // } // ] // } getStringQuery ( { \"address-city\" : \"PleasantVille\" , \"gender\" : \"male\" , \"$and\" : [] }, [ \"address.city\" ], \"address-city\" );","title":"getStringQuery(query, paramsSearchFields, queryFieldName)"},{"location":"Code%20API%20Documentation/models/FHIR/searchParameterQueryHandler/#getaddressqueryquery-queryfieldname","text":"Kind : global function Param Type Description query string The request query object queryFieldName string The name of search parameter Example (Example of `address` of search parameter of the Patient resource) // refresh query object to // { // \"$and\": [ // { // \"$or\": [ // { // \"address.line\": { // \"$regex\": /^PleasantVille/gi // } // }, // { // \"address.city\": { // \"$regex\": /^PleasantVille/gi // } // }, // { // \"address.district\": { // \"$regex\": /^PleasantVille/gi // } // }, // { // \"address.state\": { // \"$regex\": /^PleasantVille/gi // } // }, // { // \"address.postalCode\": { // \"$regex\": /^PleasantVille/gi // } // }, // { // \"address.country\": { // \"$regex\": /^PleasantVille/gi // } // } // ] // } // ] // } getAddressQuery ( { \"address\" : \"PleasantVille\" , \"gender\" : \"male\" , \"$and\" : [] }, \"address\" );","title":"getAddressQuery(query, queryFieldName)"},{"location":"Code%20API%20Documentation/models/FHIR/searchParameterQueryHandler/#getnamequeryquery-queryfieldname","text":"Kind : global function Param Type Description query string The request query object queryFieldName string The name of search parameter Example (Example of `name` of search parameter of the Patient resource) // refresh query object to // { // \"$and\": [ // { // \"$or\": [ // { // \"$or\": [ // { // \"name.text\": { // \"$regex\": /^Chalmers/gi // } // }, // { // \"name.family\": { // \"$regex\": /^Chalmers/gi // } // }, // { // \"name.given\": { // \"$regex\": /^Chalmers/gi // } // }, // { // \"name.suffix\": { // \"$regex\": /^Chalmers/gi // } // }, // { // \"name.prefix\": { // \"$regex\": /^Chalmers/gi // } // } // ] // } // ] // } // ] // } Example getNameQuery ( { \"name\" : \"Chalmers\" }, [ \"name\" ], \"name\" );","title":"getNameQuery(query, queryFieldName)"},{"location":"Code%20API%20Documentation/models/FHIR/searchParameterQueryHandler/#gettokenqueryquery-paramssearchfields-queryfieldname","text":"Kind : global function Param Type Description query string The request query object that in resource paramsSearchFields Array.<string> The fields of search parameter that in resource queryFieldName string The name of search parameter","title":"getTokenQuery(query, paramsSearchFields, queryFieldName)"},{"location":"Code%20API%20Documentation/models/FHIR/searchParameterQueryHandler/#getpolytokenqueryquery-paramssearchfields-queryfieldname-paramssearchfunc","text":"Kind : global function Param Type Description query Object The request query object paramsSearchFields Array.<string> The fields of search parameters that in resource queryFieldName string The name of search parameter paramsSearchFunc function parameter search function corresponds to data type e.g. code, codeable concept Example (Example of `address-use` of search parameter of the Patient resource) // refresh query object to // { // \"$and\": [ // { // \"$or\": [ // { // \"$or\": [ // { // \"address.use.system\": \"home\" //because some data types have system // }, // { // \"address.use\": \"home\" // } // ] // } // ] // } // ] // } getPolyTokenQuery ( { \"address-use\" : \"home\" }, [ \"address.use\" ], \"address-use\" , ( query )=> { try { queryHandler . getStringQuery ( query , paramsSearchFields , * \"address-city\" ); } catch ( e ) { console . error ( e ); throw e ; } });","title":"getPolyTokenQuery(query, paramsSearchFields, queryFieldName, paramsSearchFunc)"},{"location":"Code%20API%20Documentation/models/FHIR/searchParameterQueryHandler/#getnumberqueryquery-paramssearchfields-queryfieldname","text":"Kind : global function Param Type Description query string The request query object paramsSearchFields Array.<string> The fields of search parameters that in resource queryFieldName string The name of search parameter Example (Example of `variant-start` of search parameter of the Molecularsequence resource) // refresh query object to // { // \"$and\": [ // { // \"$or\": [ // { // \"variant.start\": { // \"$eq\": 22125503 // } // } // ] // } // ] // } getNumberQuery ( { \"$and\" : [], \"variant-start\" : 22125503 }, [ \"variant.start\" ], \"variant-start\" );","title":"getNumberQuery(query, paramsSearchFields, queryFieldName)"},{"location":"Code%20API%20Documentation/models/FHIR/searchParameterQueryHandler/#getpolydatequeryquery-paramssearchfields-queryfieldname-paramssearchfunc","text":"Kind : global function Param Type Description query Object The request query object paramsSearchFields string The fields of search parameters that in resource queryFieldName string The name of search parameter paramsSearchFunc function parameter search function corresponds to data type e.g. date, dateTime","title":"getPolyDateQuery(query, paramsSearchFields, queryFieldName, paramsSearchFunc)"},{"location":"FHIR%20API%20Documentation/Generate%20OpenAPI/","text":"\u7522\u751f OpenAPI Burni \u4f7f\u7528 apidoc \u4ee5\u53ca\u5728 config/config.js \u6a94\u6848\u8a2d\u5b9a\u7684Resources \u7522\u751f OpenAPI \u6587\u4ef6\u3002\u4e26\u4f7f\u7528 ReDoc \u4f5c\u70baAPI\u6587\u4ef6\u7684\u7db2\u7ad9. Info API\u6587\u4ef6\u5b8c\u6574\u7bc4\u4f8b\u7db2\u7ad9 here \u5982\u4f55\u7522\u751f \u4f7f\u7528\u4e0b\u9762\u7684\u6307\u4ee4\u65bc docs/apidoc/apidoc-sources \u7522\u751f\u542b\u6709[apidoc]\u8a3b\u89e3\u7684\u6a94\u6848 node api_generator/doc-generator.js \u7bc4\u4f8b\uff1a /** * * @api {get} /fhir/Account/:id read Account * @apiParam {string} id Resource ID in server * @apiName readAccount * @apiGroup Account * @apiVersion v2.1.0 * @apiDescription read Account resource by id. * * @apiExample {Shell} cURL * #example from: https://chinlinlee.github.io/Burni/assets/FHIR/fhir-resource-examples/account-example.json * curl --location --request GET 'http://burni.example.com/fhir/Account/0a2d866d-0362-4e05-9880-f62d054668cf' * @apiExample {JavaScript} javascript Axios //example from: https://chinlinlee.github.io/Burni/assets/FHIR/fhir-resource-examples/account-example.json const axios = require('axios'); const config = { method: 'get', url: 'http://burni.example.com/fhir/Account/0a2d866d-0362-4e05-9880-f62d054668cf' }; axios(config) .then(function (response) { console.log(JSON.stringify(response.data)); }) .catch(function (error) { console.log(error); }); * @apiSuccess (Success 200 Content-Type: application/fhir+json) {object} FHIR-JSON-RESOURCE * @apiSuccessExample {json} (200) name: Success-Response Content-Type: application/fhir+json { \"resourceType\": \"Account\", \"id\": \"0a2d866d-0362-4e05-9880-f62d054668cf\", \"identifier\": [ { \"system\": \"urn:oid:0.1.2.3.4.5.6.7\", \"value\": \"654321\" } ], \"status\": \"active\", \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\", \"code\": \"PBILLACCT\", \"display\": \"patient billing account\" } ], \"text\": \"patient\" }, \"name\": \"HACC Funded Billing for Peter James Chalmers\", \"subject\": [ { \"reference\": \"Patient/example\", \"display\": \"Peter James Chalmers\" } ], \"servicePeriod\": { \"start\": \"2016-01-01T08:00:00+08:00\", \"end\": \"2016-06-30T08:00:00+08:00\" }, \"coverage\": [ { \"coverage\": { \"reference\": \"Coverage/7546D\" }, \"priority\": 1 } ], \"owner\": { \"reference\": \"Organization/hl7\" }, \"description\": \"Hospital charges\", \"meta\": { \"tag\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActReason\", \"code\": \"HTEST\", \"display\": \"test health data\" } ], \"versionId\": \"1\", \"lastUpdated\": \"2022-02-13T22:30:14.037+08:00\" } } * * @apiSuccess (Success 200 Content-Type: application/fhir+xml) {object} FHIR-XML-RESOURCE * @apiSuccessExample {xml} (200) name: Success-Response-XML Content-Type: application/fhir+xml <?xml version=\"1.0\" encoding=\"UTF-8\"?><Account xmlns=\"http://hl7.org/fhir\"><id value=\"69efa3c0-73b1-4403-ba4b-ffd7b718d053\"/><meta><versionId value=\"1\"/><lastUpdated value=\"2022-02-17T17:34:51.348+08:00\"/><tag><system value=\"http://terminology.hl7.org/CodeSystem/v3-ActReason\"/><code value=\"HTEST\"/><display value=\"test health data\"/></tag></meta><identifier><system value=\"urn:oid:0.1.2.3.4.5.6.7\"/><value value=\"654321\"/></identifier><status value=\"active\"/><type><coding><system value=\"http://terminology.hl7.org/CodeSystem/v3-ActCode\"/><code value=\"PBILLACCT\"/><display value=\"patient billing account\"/></coding><text value=\"patient\"/></type><name value=\"HACC Funded Billing for Peter James Chalmers\"/><subject><reference value=\"Patient/example\"/><display value=\"Peter James Chalmers\"/></subject><servicePeriod><start value=\"2016-01-01T08:00:00+08:00\"/><end value=\"2016-06-30T08:00:00+08:00\"/></servicePeriod><coverage><coverage><reference value=\"Coverage/7546D\"/></coverage><priority value=\"1\"/></coverage><owner><reference value=\"Organization/hl7\"/></owner><description value=\"Hospital charges\"/></Account> * * @apiError (Error Not Found 404 Content-Type: application/fhir+json) {object} FHIR-JSON-RESOURCE * @apiErrorExample {json} (404) name: Not-Found-Response Content-Type: application/fhir+json { \"resourceType\": \"OperationOutcome\", \"issue\": [ { \"severity\": \"error\", \"code\": \"exception\", \"diagnostics\": \"not found Account/0a2d866d-0362-4e05-9880-f62d054668cf\" } ] } * * @apiError (Error Not Found 404 Content-Type: application/fhir+xml) {object} FHIR-XML-RESOURCE * @apiErrorExample {xml} (404) name: Not-Found-Response-XML Content-Type: application/fhir+xml <OperationOutcome xmlns='http://hl7.org/fhir'> <issue> <severity value='error'/> <code value='exception'/> <diagnostics value='not found Account/0a2d866d-0362-4e05-9880-f62d054668cf'/> </issue> </OperationOutcome> * */ \u4f7f\u7528\u4ee5\u4e0b\u6307\u4ee4\u5728 docs/apidoc/redoc \u7522\u751f openAPI \u6587\u4ef6 node docs/getAPIDocOpenapi.js \u7bc4\u4f8b\uff1a { \"openapi\" : \"3.0.0\" , \"servers\" : [ { \"url\" : \"https://dev.burni.xn--7-c56d.com/\" } ], \"info\" : { \"title\" : \"Burni API documentation\" , \"version\" : \"v2.1.0\" , \"description\" : \"Documentation for the REST API\" }, \"paths\" : { \"/fhir/Account/{id}\" : { \"get\" : { \"operationId\" : \"readAccount\" , \"tags\" : [ \"Account\" ], \"summary\" : \"read Account resource by id.\" , \"parameters\" : [ { \"name\" : \"id\" , \"in\" : \"path\" , \"required\" : true , \"schema\" : { \"type\" : \"string\" }, \"description\" : \"Resource ID in server\" } ], \"responses\" : { \"200\" : { \"description\" : \"successful operation\" , \"content\" : { \"application/fhir+json\" : { \"schema\" : { \"type\" : \"object\" , \"items\" : { \"$ref\" : \"#/components/schemas/FHIR-XML-RESOURCE\" } }, \"examples\" : { \"Success-Response\" : { \"value\" : { \"resourceType\" : \"Account\" , \"id\" : \"0a2d866d-0362-4e05-9880-f62d054668cf\" , \"identifier\" : [ { \"system\" : \"urn:oid:0.1.2.3.4.5.6.7\" , \"value\" : \"654321\" } ], \"status\" : \"active\" , \"type\" : { \"coding\" : [ { \"system\" : \"http://terminology.hl7.org/CodeSystem/v3-ActCode\" , \"code\" : \"PBILLACCT\" , \"display\" : \"patient billing account\" } ], \"text\" : \"patient\" }, \"name\" : \"HACC Funded Billing for Peter James Chalmers\" , \"subject\" : [ { \"reference\" : \"Patient/example\" , \"display\" : \"Peter James Chalmers\" } ], \"servicePeriod\" : { \"start\" : \"2016-01-01T08:00:00+08:00\" , \"end\" : \"2016-06-30T08:00:00+08:00\" }, \"coverage\" : [ { \"coverage\" : { \"reference\" : \"Coverage/7546D\" }, \"priority\" : 1 } ], \"owner\" : { \"reference\" : \"Organization/hl7\" }, \"description\" : \"Hospital charges\" , \"meta\" : { \"tag\" : [ { \"system\" : \"http://terminology.hl7.org/CodeSystem/v3-ActReason\" , \"code\" : \"HTEST\" , \"display\" : \"test health data\" } ], \"versionId\" : \"1\" , \"lastUpdated\" : \"2022-02-13T22:30:14.037+08:00\" } } } } }, \"application/fhir+xml\" : { \"schema\" : { \"type\" : \"object\" , \"items\" : { \"$ref\" : \"#/components/schemas/FHIR-XML-RESOURCE\" }, \"xml\" : { \"name\" : \"Account\" } }, \"examples\" : { \"Success-Response-XML\" : { \"value\" : \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><Account xmlns=\\\"http://hl7.org/fhir\\\"><id value=\\\"69efa3c0-73b1-4403-ba4b-ffd7b718d053\\\"/><meta><versionId value=\\\"1\\\"/><lastUpdated value=\\\"2022-02-17T17:34:51.348+08:00\\\"/><tag><system value=\\\"http://terminology.hl7.org/CodeSystem/v3-ActReason\\\"/><code value=\\\"HTEST\\\"/><display value=\\\"test health data\\\"/></tag></meta><identifier><system value=\\\"urn:oid:0.1.2.3.4.5.6.7\\\"/><value value=\\\"654321\\\"/></identifier><status value=\\\"active\\\"/><type><coding><system value=\\\"http://terminology.hl7.org/CodeSystem/v3-ActCode\\\"/><code value=\\\"PBILLACCT\\\"/><display value=\\\"patient billing account\\\"/></coding><text value=\\\"patient\\\"/></type><name value=\\\"HACC Funded Billing for Peter James Chalmers\\\"/><subject><reference value=\\\"Patient/example\\\"/><display value=\\\"Peter James Chalmers\\\"/></subject><servicePeriod><start value=\\\"2016-01-01T08:00:00+08:00\\\"/><end value=\\\"2016-06-30T08:00:00+08:00\\\"/></servicePeriod><coverage><coverage><reference value=\\\"Coverage/7546D\\\"/></coverage><priority value=\\\"1\\\"/></coverage><owner><reference value=\\\"Organization/hl7\\\"/></owner><description value=\\\"Hospital charges\\\"/></Account>\" } } } } }, \"404\" : { \"description\" : \"error\" , \"content\" : { \"application/fhir+json\" : { \"schema\" : { \"type\" : \"object\" , \"items\" : { \"$ref\" : \"#/components/schemas/FHIR-XML-RESOURCE\" } }, \"examples\" : { \"Not-Found-Response\" : { \"value\" : { \"resourceType\" : \"OperationOutcome\" , \"issue\" : [ { \"severity\" : \"error\" , \"code\" : \"exception\" , \"diagnostics\" : \"not found Account/0a2d866d-0362-4e05-9880-f62d054668cf\" } ] } } } }, \"application/fhir+xml\" : { \"schema\" : { \"type\" : \"object\" , \"items\" : { \"$ref\" : \"#/components/schemas/FHIR-XML-RESOURCE\" }, \"xml\" : { \"name\" : \"OperationOutcome\" } }, \"examples\" : { \"Not-Found-Response-XML\" : { \"value\" : \"<OperationOutcome xmlns='http://hl7.org/fhir'>\\n<issue>\\n <severity value='error'/>\\n <code value='exception'/>\\n <diagnostics value='not found Account/0a2d866d-0362-4e05-9880-f62d054668cf'/>\\n</issue>\\n</OperationOutcome>\" } } } } } }, \"x-codeSamples\" : [ { \"lang\" : \"Shell\" , \"source\" : \"#example from: https://chinlinlee.github.io/Burni/assets/FHIR/fhir-resource-examples/account-example.json\\ncurl --location --request GET 'http://burni.example.com/fhir/Account/0a2d866d-0362-4e05-9880-f62d054668cf'\" , \"label\" : \"cURL\" }, { \"lang\" : \"JavaScript\" , \"source\" : \" //example from: https://chinlinlee.github.io/Burni/assets/FHIR/fhir-resource-examples/account-example.json\\nconst axios = require('axios');\\nconst config = {\\n method: 'get',\\n url: 'http://burni.example.com/fhir/Account/0a2d866d-0362-4e05-9880-f62d054668cf'\\n};\\n\\naxios(config)\\n.then(function (response) {\\n console.log(JSON.stringify(response.data));\\n})\\n.catch(function (error) {\\n console.log(error);\\n});\" , \"label\" : \"javascript Axios\" } ] } } }, \"components\" : { \"schemas\" : { \"FHIR-JSON-RESOURCE\" : { \"properties\" : {} }, \"FHIR-XML-RESOURCE\" : { \"properties\" : {} }, \"readAccount\" : { \"properties\" : { \"id\" : { \"type\" : \"string\" , \"description\" : \"Resource ID in server\" } }, \"required\" : [ \"id\" ] } } } }","title":"\u7522\u751fOpenAPI"},{"location":"FHIR%20API%20Documentation/Generate%20OpenAPI/#openapi","text":"Burni \u4f7f\u7528 apidoc \u4ee5\u53ca\u5728 config/config.js \u6a94\u6848\u8a2d\u5b9a\u7684Resources \u7522\u751f OpenAPI \u6587\u4ef6\u3002\u4e26\u4f7f\u7528 ReDoc \u4f5c\u70baAPI\u6587\u4ef6\u7684\u7db2\u7ad9. Info API\u6587\u4ef6\u5b8c\u6574\u7bc4\u4f8b\u7db2\u7ad9 here","title":"\u7522\u751f OpenAPI"},{"location":"FHIR%20API%20Documentation/Generate%20OpenAPI/#_1","text":"\u4f7f\u7528\u4e0b\u9762\u7684\u6307\u4ee4\u65bc docs/apidoc/apidoc-sources \u7522\u751f\u542b\u6709[apidoc]\u8a3b\u89e3\u7684\u6a94\u6848 node api_generator/doc-generator.js \u7bc4\u4f8b\uff1a /** * * @api {get} /fhir/Account/:id read Account * @apiParam {string} id Resource ID in server * @apiName readAccount * @apiGroup Account * @apiVersion v2.1.0 * @apiDescription read Account resource by id. * * @apiExample {Shell} cURL * #example from: https://chinlinlee.github.io/Burni/assets/FHIR/fhir-resource-examples/account-example.json * curl --location --request GET 'http://burni.example.com/fhir/Account/0a2d866d-0362-4e05-9880-f62d054668cf' * @apiExample {JavaScript} javascript Axios //example from: https://chinlinlee.github.io/Burni/assets/FHIR/fhir-resource-examples/account-example.json const axios = require('axios'); const config = { method: 'get', url: 'http://burni.example.com/fhir/Account/0a2d866d-0362-4e05-9880-f62d054668cf' }; axios(config) .then(function (response) { console.log(JSON.stringify(response.data)); }) .catch(function (error) { console.log(error); }); * @apiSuccess (Success 200 Content-Type: application/fhir+json) {object} FHIR-JSON-RESOURCE * @apiSuccessExample {json} (200) name: Success-Response Content-Type: application/fhir+json { \"resourceType\": \"Account\", \"id\": \"0a2d866d-0362-4e05-9880-f62d054668cf\", \"identifier\": [ { \"system\": \"urn:oid:0.1.2.3.4.5.6.7\", \"value\": \"654321\" } ], \"status\": \"active\", \"type\": { \"coding\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActCode\", \"code\": \"PBILLACCT\", \"display\": \"patient billing account\" } ], \"text\": \"patient\" }, \"name\": \"HACC Funded Billing for Peter James Chalmers\", \"subject\": [ { \"reference\": \"Patient/example\", \"display\": \"Peter James Chalmers\" } ], \"servicePeriod\": { \"start\": \"2016-01-01T08:00:00+08:00\", \"end\": \"2016-06-30T08:00:00+08:00\" }, \"coverage\": [ { \"coverage\": { \"reference\": \"Coverage/7546D\" }, \"priority\": 1 } ], \"owner\": { \"reference\": \"Organization/hl7\" }, \"description\": \"Hospital charges\", \"meta\": { \"tag\": [ { \"system\": \"http://terminology.hl7.org/CodeSystem/v3-ActReason\", \"code\": \"HTEST\", \"display\": \"test health data\" } ], \"versionId\": \"1\", \"lastUpdated\": \"2022-02-13T22:30:14.037+08:00\" } } * * @apiSuccess (Success 200 Content-Type: application/fhir+xml) {object} FHIR-XML-RESOURCE * @apiSuccessExample {xml} (200) name: Success-Response-XML Content-Type: application/fhir+xml <?xml version=\"1.0\" encoding=\"UTF-8\"?><Account xmlns=\"http://hl7.org/fhir\"><id value=\"69efa3c0-73b1-4403-ba4b-ffd7b718d053\"/><meta><versionId value=\"1\"/><lastUpdated value=\"2022-02-17T17:34:51.348+08:00\"/><tag><system value=\"http://terminology.hl7.org/CodeSystem/v3-ActReason\"/><code value=\"HTEST\"/><display value=\"test health data\"/></tag></meta><identifier><system value=\"urn:oid:0.1.2.3.4.5.6.7\"/><value value=\"654321\"/></identifier><status value=\"active\"/><type><coding><system value=\"http://terminology.hl7.org/CodeSystem/v3-ActCode\"/><code value=\"PBILLACCT\"/><display value=\"patient billing account\"/></coding><text value=\"patient\"/></type><name value=\"HACC Funded Billing for Peter James Chalmers\"/><subject><reference value=\"Patient/example\"/><display value=\"Peter James Chalmers\"/></subject><servicePeriod><start value=\"2016-01-01T08:00:00+08:00\"/><end value=\"2016-06-30T08:00:00+08:00\"/></servicePeriod><coverage><coverage><reference value=\"Coverage/7546D\"/></coverage><priority value=\"1\"/></coverage><owner><reference value=\"Organization/hl7\"/></owner><description value=\"Hospital charges\"/></Account> * * @apiError (Error Not Found 404 Content-Type: application/fhir+json) {object} FHIR-JSON-RESOURCE * @apiErrorExample {json} (404) name: Not-Found-Response Content-Type: application/fhir+json { \"resourceType\": \"OperationOutcome\", \"issue\": [ { \"severity\": \"error\", \"code\": \"exception\", \"diagnostics\": \"not found Account/0a2d866d-0362-4e05-9880-f62d054668cf\" } ] } * * @apiError (Error Not Found 404 Content-Type: application/fhir+xml) {object} FHIR-XML-RESOURCE * @apiErrorExample {xml} (404) name: Not-Found-Response-XML Content-Type: application/fhir+xml <OperationOutcome xmlns='http://hl7.org/fhir'> <issue> <severity value='error'/> <code value='exception'/> <diagnostics value='not found Account/0a2d866d-0362-4e05-9880-f62d054668cf'/> </issue> </OperationOutcome> * */ \u4f7f\u7528\u4ee5\u4e0b\u6307\u4ee4\u5728 docs/apidoc/redoc \u7522\u751f openAPI \u6587\u4ef6 node docs/getAPIDocOpenapi.js \u7bc4\u4f8b\uff1a { \"openapi\" : \"3.0.0\" , \"servers\" : [ { \"url\" : \"https://dev.burni.xn--7-c56d.com/\" } ], \"info\" : { \"title\" : \"Burni API documentation\" , \"version\" : \"v2.1.0\" , \"description\" : \"Documentation for the REST API\" }, \"paths\" : { \"/fhir/Account/{id}\" : { \"get\" : { \"operationId\" : \"readAccount\" , \"tags\" : [ \"Account\" ], \"summary\" : \"read Account resource by id.\" , \"parameters\" : [ { \"name\" : \"id\" , \"in\" : \"path\" , \"required\" : true , \"schema\" : { \"type\" : \"string\" }, \"description\" : \"Resource ID in server\" } ], \"responses\" : { \"200\" : { \"description\" : \"successful operation\" , \"content\" : { \"application/fhir+json\" : { \"schema\" : { \"type\" : \"object\" , \"items\" : { \"$ref\" : \"#/components/schemas/FHIR-XML-RESOURCE\" } }, \"examples\" : { \"Success-Response\" : { \"value\" : { \"resourceType\" : \"Account\" , \"id\" : \"0a2d866d-0362-4e05-9880-f62d054668cf\" , \"identifier\" : [ { \"system\" : \"urn:oid:0.1.2.3.4.5.6.7\" , \"value\" : \"654321\" } ], \"status\" : \"active\" , \"type\" : { \"coding\" : [ { \"system\" : \"http://terminology.hl7.org/CodeSystem/v3-ActCode\" , \"code\" : \"PBILLACCT\" , \"display\" : \"patient billing account\" } ], \"text\" : \"patient\" }, \"name\" : \"HACC Funded Billing for Peter James Chalmers\" , \"subject\" : [ { \"reference\" : \"Patient/example\" , \"display\" : \"Peter James Chalmers\" } ], \"servicePeriod\" : { \"start\" : \"2016-01-01T08:00:00+08:00\" , \"end\" : \"2016-06-30T08:00:00+08:00\" }, \"coverage\" : [ { \"coverage\" : { \"reference\" : \"Coverage/7546D\" }, \"priority\" : 1 } ], \"owner\" : { \"reference\" : \"Organization/hl7\" }, \"description\" : \"Hospital charges\" , \"meta\" : { \"tag\" : [ { \"system\" : \"http://terminology.hl7.org/CodeSystem/v3-ActReason\" , \"code\" : \"HTEST\" , \"display\" : \"test health data\" } ], \"versionId\" : \"1\" , \"lastUpdated\" : \"2022-02-13T22:30:14.037+08:00\" } } } } }, \"application/fhir+xml\" : { \"schema\" : { \"type\" : \"object\" , \"items\" : { \"$ref\" : \"#/components/schemas/FHIR-XML-RESOURCE\" }, \"xml\" : { \"name\" : \"Account\" } }, \"examples\" : { \"Success-Response-XML\" : { \"value\" : \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><Account xmlns=\\\"http://hl7.org/fhir\\\"><id value=\\\"69efa3c0-73b1-4403-ba4b-ffd7b718d053\\\"/><meta><versionId value=\\\"1\\\"/><lastUpdated value=\\\"2022-02-17T17:34:51.348+08:00\\\"/><tag><system value=\\\"http://terminology.hl7.org/CodeSystem/v3-ActReason\\\"/><code value=\\\"HTEST\\\"/><display value=\\\"test health data\\\"/></tag></meta><identifier><system value=\\\"urn:oid:0.1.2.3.4.5.6.7\\\"/><value value=\\\"654321\\\"/></identifier><status value=\\\"active\\\"/><type><coding><system value=\\\"http://terminology.hl7.org/CodeSystem/v3-ActCode\\\"/><code value=\\\"PBILLACCT\\\"/><display value=\\\"patient billing account\\\"/></coding><text value=\\\"patient\\\"/></type><name value=\\\"HACC Funded Billing for Peter James Chalmers\\\"/><subject><reference value=\\\"Patient/example\\\"/><display value=\\\"Peter James Chalmers\\\"/></subject><servicePeriod><start value=\\\"2016-01-01T08:00:00+08:00\\\"/><end value=\\\"2016-06-30T08:00:00+08:00\\\"/></servicePeriod><coverage><coverage><reference value=\\\"Coverage/7546D\\\"/></coverage><priority value=\\\"1\\\"/></coverage><owner><reference value=\\\"Organization/hl7\\\"/></owner><description value=\\\"Hospital charges\\\"/></Account>\" } } } } }, \"404\" : { \"description\" : \"error\" , \"content\" : { \"application/fhir+json\" : { \"schema\" : { \"type\" : \"object\" , \"items\" : { \"$ref\" : \"#/components/schemas/FHIR-XML-RESOURCE\" } }, \"examples\" : { \"Not-Found-Response\" : { \"value\" : { \"resourceType\" : \"OperationOutcome\" , \"issue\" : [ { \"severity\" : \"error\" , \"code\" : \"exception\" , \"diagnostics\" : \"not found Account/0a2d866d-0362-4e05-9880-f62d054668cf\" } ] } } } }, \"application/fhir+xml\" : { \"schema\" : { \"type\" : \"object\" , \"items\" : { \"$ref\" : \"#/components/schemas/FHIR-XML-RESOURCE\" }, \"xml\" : { \"name\" : \"OperationOutcome\" } }, \"examples\" : { \"Not-Found-Response-XML\" : { \"value\" : \"<OperationOutcome xmlns='http://hl7.org/fhir'>\\n<issue>\\n <severity value='error'/>\\n <code value='exception'/>\\n <diagnostics value='not found Account/0a2d866d-0362-4e05-9880-f62d054668cf'/>\\n</issue>\\n</OperationOutcome>\" } } } } } }, \"x-codeSamples\" : [ { \"lang\" : \"Shell\" , \"source\" : \"#example from: https://chinlinlee.github.io/Burni/assets/FHIR/fhir-resource-examples/account-example.json\\ncurl --location --request GET 'http://burni.example.com/fhir/Account/0a2d866d-0362-4e05-9880-f62d054668cf'\" , \"label\" : \"cURL\" }, { \"lang\" : \"JavaScript\" , \"source\" : \" //example from: https://chinlinlee.github.io/Burni/assets/FHIR/fhir-resource-examples/account-example.json\\nconst axios = require('axios');\\nconst config = {\\n method: 'get',\\n url: 'http://burni.example.com/fhir/Account/0a2d866d-0362-4e05-9880-f62d054668cf'\\n};\\n\\naxios(config)\\n.then(function (response) {\\n console.log(JSON.stringify(response.data));\\n})\\n.catch(function (error) {\\n console.log(error);\\n});\" , \"label\" : \"javascript Axios\" } ] } } }, \"components\" : { \"schemas\" : { \"FHIR-JSON-RESOURCE\" : { \"properties\" : {} }, \"FHIR-XML-RESOURCE\" : { \"properties\" : {} }, \"readAccount\" : { \"properties\" : { \"id\" : { \"type\" : \"string\" , \"description\" : \"Resource ID in server\" } }, \"required\" : [ \"id\" ] } } } }","title":"\u5982\u4f55\u7522\u751f"},{"location":"FHIR%20API%20Documentation/Overview/","text":"FHIR API \u6587\u4ef6\u6982\u89c0 Burni \u76ee\u524d\u652f\u63f4\u7684 FHIR RESTful API \u5982\u4e0b\uff1a Instance Level Interactions read vread update delete history Type Level Interactions create search Whole System Interactions None","title":"\u6982\u89c0"},{"location":"FHIR%20API%20Documentation/Overview/#fhir-api","text":"Burni \u76ee\u524d\u652f\u63f4\u7684 FHIR RESTful API \u5982\u4e0b\uff1a","title":"FHIR API \u6587\u4ef6\u6982\u89c0"},{"location":"FHIR%20API%20Documentation/Overview/#instance-level-interactions","text":"read vread update delete history","title":"Instance Level Interactions"},{"location":"FHIR%20API%20Documentation/Overview/#type-level-interactions","text":"create search","title":"Type Level Interactions"},{"location":"FHIR%20API%20Documentation/Overview/#whole-system-interactions","text":"None","title":"Whole System Interactions"},{"location":"FHIR%20Validator/","text":"FHIR Validator Burni \u7684 FHIR Validator \u900f\u904e Node.js \u8207 Java \u878d\u5408\u7684\u5c08\u6848 node-java-fhir-validator \u5be6\u73fe \u6ce8\u610f\u4e8b\u9805 node-java-fhir-validator \u8acb\u4f7f\u7528 0.2.0 \u7248\u672c \uff0c\u5f8c\u7e8c\u7248\u672c\u9084\u672a\u6574\u5408\u81f3 Burni node-java-fhir-validator 0.2.0 \u7248\u672c\u4f7f\u7528 joeferner / node-java \u5f8c\u7e8c\u7248\u672c\u5247\u662f\u4f7f\u7528 node-java-bridge \u91cd\u73fe fhir-validator-wrapper \u7684\u529f\u80fd Burni \u653e\u7f6e FHIR Validator \u7684\u8def\u5f91: utils/validator index.js : \u521d\u59cb\u5316\u5f15\u5165 utils/validator/igs \u8cc7\u6599\u593e\u4e2d\u7684 StructureDefinition (profile json file) \u548c xxx.package.tgz (ig tgz file) \u5230 validator \u7684\u7a0b\u5f0f\u78bc processor.js : \u5be6\u4f5c validateResource \u7684\u7a0b\u5f0f\u78bc \u54ea\u4e9b API \u4f7f\u7528\u4e86 FHIR Validator? create: \u7576 POST \u8cc7\u6599\u6642\uff0c\u6703\u5148\u9032\u884c\u9a57\u8b49\uff0c\u9a57\u8b49\u901a\u904e\u624d\u6703\u9032\u884c create\uff0c\u53cd\u4e4b\u56de\u50b3 422 \u932f\u8aa4 update: \u7576 PUT \u8cc7\u6599\u6642\uff0c\u6703\u5148\u9032\u884c\u9a57\u8b49\uff0c\u9a57\u8b49\u901a\u904e\u624d\u6703\u9032\u884c update\uff0c\u53cd\u4e4b\u56de\u50b3 422 \u932f\u8aa4 $validate: \u9a57\u8b49\u529f\u80fd\uff0c\u901a\u904e\u8fd4\u56de 200\uff0c\u53cd\u4e4b\u56de\u50b3 422 \u932f\u8aa4","title":"FHIR Validator"},{"location":"FHIR%20Validator/#fhir-validator","text":"Burni \u7684 FHIR Validator \u900f\u904e Node.js \u8207 Java \u878d\u5408\u7684\u5c08\u6848 node-java-fhir-validator \u5be6\u73fe \u6ce8\u610f\u4e8b\u9805 node-java-fhir-validator \u8acb\u4f7f\u7528 0.2.0 \u7248\u672c \uff0c\u5f8c\u7e8c\u7248\u672c\u9084\u672a\u6574\u5408\u81f3 Burni node-java-fhir-validator 0.2.0 \u7248\u672c\u4f7f\u7528 joeferner / node-java \u5f8c\u7e8c\u7248\u672c\u5247\u662f\u4f7f\u7528 node-java-bridge \u91cd\u73fe fhir-validator-wrapper \u7684\u529f\u80fd Burni \u653e\u7f6e FHIR Validator \u7684\u8def\u5f91: utils/validator index.js : \u521d\u59cb\u5316\u5f15\u5165 utils/validator/igs \u8cc7\u6599\u593e\u4e2d\u7684 StructureDefinition (profile json file) \u548c xxx.package.tgz (ig tgz file) \u5230 validator \u7684\u7a0b\u5f0f\u78bc processor.js : \u5be6\u4f5c validateResource \u7684\u7a0b\u5f0f\u78bc","title":"FHIR Validator"},{"location":"FHIR%20Validator/#api-fhir-validator","text":"create: \u7576 POST \u8cc7\u6599\u6642\uff0c\u6703\u5148\u9032\u884c\u9a57\u8b49\uff0c\u9a57\u8b49\u901a\u904e\u624d\u6703\u9032\u884c create\uff0c\u53cd\u4e4b\u56de\u50b3 422 \u932f\u8aa4 update: \u7576 PUT \u8cc7\u6599\u6642\uff0c\u6703\u5148\u9032\u884c\u9a57\u8b49\uff0c\u9a57\u8b49\u901a\u904e\u624d\u6703\u9032\u884c update\uff0c\u53cd\u4e4b\u56de\u50b3 422 \u932f\u8aa4 $validate: \u9a57\u8b49\u529f\u80fd\uff0c\u901a\u904e\u8fd4\u56de 200\uff0c\u53cd\u4e4b\u56de\u50b3 422 \u932f\u8aa4","title":"\u54ea\u4e9b API \u4f7f\u7528\u4e86 FHIR Validator?"},{"location":"Getting%20started/Configuration/","text":"Configuration config\\config.js module . exports = { // add the resource name that you need \"Patient\" : { \"interaction\" : { \"read\" : true , \"vread\" : true , \"update\" : true , \"delete\" : true , \"history\" : true , \"create\" : true , \"search\" : true } } } Note \u6b64\u6a94\u6848\u5728\u8a2d\u5b9a\u60a8\u6240\u60f3\u652f\u63f4\u7684FHIR Resources(\u8cc7\u6e90)\u3002 \u5982\u679c\u60a8\u60f3\u652f\u63f4\u6240\u6709\u7684FHIR Resources(\u8cc7\u6e90)\uff0c\u60a8\u53ef\u4ee5\u57f7\u884c\u4ee5\u4e0b\u6307\u4ee4\uff1a node config/generate-allResources.js \u57f7\u884c\u6307\u4ee4\u5c07\u6703\u7522\u751f\u5df2\u8a2d\u5b9a\u6240\u6709FHIR Resource(\u8cc7\u6e90)\u7684config.js\u6a94\u6848 dotenv .env \u65bc\u5c08\u6848\u6839\u76ee\u9304 MONGODB_NAME=\"dbName\" MONGODB_HOSTS=[\"mongodb\"] MONGODB_PORTS=[27017] MONGODB_USER=\"myAdmin\" MONGODB_PASSWORD=\"MymongoAdmin1\" MONGODB_IS_SHARDING_MODE=false MONGODB_SLAVEMODE=false SERVER_PORT=8080 FHIRSERVER_HOST=\"localhost\" FHIRSERVER_PORT=8080 #use by creating bundle url FHIRSERVER_APIPATH=\"fhir\" #If u want to use token auth, add below. ENABLE_TOKEN_AUTH=true ADMIN_LOGIN_PATH=\"adminLogin\" ADMIN_USERNAME=\"adminUsername\" ADMIN_PASSWORD=\"adminPassword\" ENABLE_CHECK_ALL_RESOURCE_ID=false #true that want to check resource id cross all resource ENABLE_CHECK_REFERENCE #true that want to check reference is exist in resource content ENABLE_CSHARP_VALIDATOR=false VALIDATION_FILES_ROOT_PATH=\"FHIRValidatorAPI/FHIRValidatorAPI/assets/validationResources\" # Please config the path corresponded to CSharp assets/validationResources directory VALIDATION_API_URL=\"https://localhost:44381/api/validate\" \u7522\u751f\u7a0b\u5f0f\u78bc \u5982\u679c\u60a8\u5df2\u5b8c\u6210\u4ee5\u4e0a\u7684\u8a2d\u5b9a\uff0c\u60a8\u5fc5\u9808\u57f7\u884c\u4ee5\u4e0b\u6307\u4ee4\u7522\u751f Mongoose Model\u3001API \u7a0b\u5f0f\u78bc\u8b93 Burni \u6b63\u5e38\u904b\u4f5c\u3002 npm run build Warning TypeError: genParamFunc[type] is not a function \u4ee3\u8868\u6b64\u985e\u578b\u7684\u641c\u5c0b\u53c3\u6578\u76ee\u524d\u4e0d\u652f\u63f4\u3002","title":"\u8a2d\u5b9a"},{"location":"Getting%20started/Configuration/#configuration","text":"","title":"Configuration"},{"location":"Getting%20started/Configuration/#configconfigjs","text":"module . exports = { // add the resource name that you need \"Patient\" : { \"interaction\" : { \"read\" : true , \"vread\" : true , \"update\" : true , \"delete\" : true , \"history\" : true , \"create\" : true , \"search\" : true } } } Note \u6b64\u6a94\u6848\u5728\u8a2d\u5b9a\u60a8\u6240\u60f3\u652f\u63f4\u7684FHIR Resources(\u8cc7\u6e90)\u3002 \u5982\u679c\u60a8\u60f3\u652f\u63f4\u6240\u6709\u7684FHIR Resources(\u8cc7\u6e90)\uff0c\u60a8\u53ef\u4ee5\u57f7\u884c\u4ee5\u4e0b\u6307\u4ee4\uff1a node config/generate-allResources.js \u57f7\u884c\u6307\u4ee4\u5c07\u6703\u7522\u751f\u5df2\u8a2d\u5b9a\u6240\u6709FHIR Resource(\u8cc7\u6e90)\u7684config.js\u6a94\u6848","title":"config\\config.js"},{"location":"Getting%20started/Configuration/#dotenv","text":".env \u65bc\u5c08\u6848\u6839\u76ee\u9304 MONGODB_NAME=\"dbName\" MONGODB_HOSTS=[\"mongodb\"] MONGODB_PORTS=[27017] MONGODB_USER=\"myAdmin\" MONGODB_PASSWORD=\"MymongoAdmin1\" MONGODB_IS_SHARDING_MODE=false MONGODB_SLAVEMODE=false SERVER_PORT=8080 FHIRSERVER_HOST=\"localhost\" FHIRSERVER_PORT=8080 #use by creating bundle url FHIRSERVER_APIPATH=\"fhir\" #If u want to use token auth, add below. ENABLE_TOKEN_AUTH=true ADMIN_LOGIN_PATH=\"adminLogin\" ADMIN_USERNAME=\"adminUsername\" ADMIN_PASSWORD=\"adminPassword\" ENABLE_CHECK_ALL_RESOURCE_ID=false #true that want to check resource id cross all resource ENABLE_CHECK_REFERENCE #true that want to check reference is exist in resource content ENABLE_CSHARP_VALIDATOR=false VALIDATION_FILES_ROOT_PATH=\"FHIRValidatorAPI/FHIRValidatorAPI/assets/validationResources\" # Please config the path corresponded to CSharp assets/validationResources directory VALIDATION_API_URL=\"https://localhost:44381/api/validate\"","title":"dotenv"},{"location":"Getting%20started/Configuration/#_1","text":"\u5982\u679c\u60a8\u5df2\u5b8c\u6210\u4ee5\u4e0a\u7684\u8a2d\u5b9a\uff0c\u60a8\u5fc5\u9808\u57f7\u884c\u4ee5\u4e0b\u6307\u4ee4\u7522\u751f Mongoose Model\u3001API \u7a0b\u5f0f\u78bc\u8b93 Burni \u6b63\u5e38\u904b\u4f5c\u3002 npm run build Warning TypeError: genParamFunc[type] is not a function \u4ee3\u8868\u6b64\u985e\u578b\u7684\u641c\u5c0b\u53c3\u6578\u76ee\u524d\u4e0d\u652f\u63f4\u3002","title":"\u7522\u751f\u7a0b\u5f0f\u78bc"},{"location":"Getting%20started/Deploy/","text":"\u90e8\u5c6c \u4f7f\u7528 Node.JS node server.js \u60a8\u6703\u770b\u5230 console \u6253\u5370\u4ee5\u4e0b\u8a0a\u606f\uff1a mongodb://localhost:27017/dbName moduleName :: Patient path : path\\burni\\models\\mongodb/model moduleName :: Patient_history path : path\\burni\\models\\mongodb/model moduleName :: FHIRStoredID path : path\\burni\\models\\mongodb/staticModel moduleName :: issuedToken path : path\\burni\\models\\mongodb/staticModel http server is listening on port:8089 we're connected! \u4f7f\u7528 docker-compose \u4ee5\u4e0b\u662f\u4f86\u81ea\u6839\u76ee\u9304 docker-compose.yaml \u7684\u7bc4\u4f8b version : '3.4' services : fhir-burni-mongodb : image : mongo:4.2 container_name : fhir-burni-mongodb restart : always ports : - 27017:27017 volumes : - ./mongodb/db:/data/db environment : # provide your credentials here - MONGO_INITDB_DATABASE=admin - MONGO_INITDB_ROOT_USERNAME=root - MONGO_INITDB_ROOT_PASSWORD=root - MONGO_PORT=27017 fhir-burni : build : ./ container_name : fhir-burni command : > /bin/sh -c ' while ! nc -z fhir-burni-mongodb 27017; do echo \"waiting for database ...\"; sleep 3; done; echo \"db is ready!\"; pm2-runtime start ecosystem.config.js; ' volumes : - ./:/nodejs/fhir-burni - /nodejs/fhir-burni/node_modules ports : - 8080:8080 depends_on : - fhir-burni-mongodb tty : true restart : on-failure:3 stdin_open : true docker-compose\u90e8\u5c6c docker-compose up -d","title":"\u90e8\u5c6c"},{"location":"Getting%20started/Deploy/#_1","text":"","title":"\u90e8\u5c6c"},{"location":"Getting%20started/Deploy/#nodejs","text":"node server.js \u60a8\u6703\u770b\u5230 console \u6253\u5370\u4ee5\u4e0b\u8a0a\u606f\uff1a mongodb://localhost:27017/dbName moduleName :: Patient path : path\\burni\\models\\mongodb/model moduleName :: Patient_history path : path\\burni\\models\\mongodb/model moduleName :: FHIRStoredID path : path\\burni\\models\\mongodb/staticModel moduleName :: issuedToken path : path\\burni\\models\\mongodb/staticModel http server is listening on port:8089 we're connected!","title":"\u4f7f\u7528 Node.JS"},{"location":"Getting%20started/Deploy/#docker-compose","text":"\u4ee5\u4e0b\u662f\u4f86\u81ea\u6839\u76ee\u9304 docker-compose.yaml \u7684\u7bc4\u4f8b version : '3.4' services : fhir-burni-mongodb : image : mongo:4.2 container_name : fhir-burni-mongodb restart : always ports : - 27017:27017 volumes : - ./mongodb/db:/data/db environment : # provide your credentials here - MONGO_INITDB_DATABASE=admin - MONGO_INITDB_ROOT_USERNAME=root - MONGO_INITDB_ROOT_PASSWORD=root - MONGO_PORT=27017 fhir-burni : build : ./ container_name : fhir-burni command : > /bin/sh -c ' while ! nc -z fhir-burni-mongodb 27017; do echo \"waiting for database ...\"; sleep 3; done; echo \"db is ready!\"; pm2-runtime start ecosystem.config.js; ' volumes : - ./:/nodejs/fhir-burni - /nodejs/fhir-burni/node_modules ports : - 8080:8080 depends_on : - fhir-burni-mongodb tty : true restart : on-failure:3 stdin_open : true","title":"\u4f7f\u7528 docker-compose"},{"location":"Getting%20started/Deploy/#docker-compose_1","text":"docker-compose up -d","title":"docker-compose\u90e8\u5c6c"},{"location":"Getting%20started/Installation/","text":"Installation \u8acb\u78ba\u8a8d\u60a8\u7684\u74b0\u5883\u6709\u4ee5\u4e0b\u5167\u5bb9\uff1a git Node.JS MongoDB > 4.2 \u4f7f\u7528 git \u5f9e git \u8907\u88fd\u5c08\u6848 bash git clone https://github.com/Chinlinlee/Burni.git \u5b89\u88dd\u5957\u4ef6 bash npm install \u5b89\u88dd\u5b8c\u7562\u5f8c\uff0c\u4e0b\u4e00\u6b65\u9032\u884c \u8a2d\u5b9a","title":"\u5b89\u88dd"},{"location":"Getting%20started/Installation/#installation","text":"\u8acb\u78ba\u8a8d\u60a8\u7684\u74b0\u5883\u6709\u4ee5\u4e0b\u5167\u5bb9\uff1a git Node.JS MongoDB > 4.2","title":"Installation"},{"location":"Getting%20started/Installation/#git","text":"\u5f9e git \u8907\u88fd\u5c08\u6848 bash git clone https://github.com/Chinlinlee/Burni.git \u5b89\u88dd\u5957\u4ef6 bash npm install \u5b89\u88dd\u5b8c\u7562\u5f8c\uff0c\u4e0b\u4e00\u6b65\u9032\u884c \u8a2d\u5b9a","title":"\u4f7f\u7528 git"},{"location":"SearchParameter/Add_SearchParameter/","text":"\u81ea\u884c\u65b0\u589e\u641c\u5c0b\u53c3\u6578 \u8207\u641c\u5c0b\u53c3\u6578\u76f8\u95dc\u7684\u7a0b\u5f0f\u78bc\u4f4d\u65bc models\\FHIR\\queryBuild.js \u4ee5\u53ca models\\FHIR\\searchParameterQueryHandler.js \u6a94\u6848\u3002 queryBuild.js : \u6839\u64da\u4e0d\u540c\u7684 Data Type \u7d44\u6210\u55ae\u500bMongoDB \u67e5\u8a62\u8a9e\u6cd5\u3002 searchParameterQueryHandler.js : \u6839\u64da HTTP \u7db2\u5740\u4e2d\u7684\u67e5\u8a62\u689d\u4ef6\u4f7f\u7528 queryBuild.js \u53d6\u5f97\u5b8c\u6574\u7684 MongoDB \u67e5\u8a62\u8a9e\u6cd5\u3002 \u7531\u7522\u751f\u5668\u7522\u751f\u4e4b\u90e8\u5206\u641c\u5c0b\u53c3\u6578\u53ef\u80fd\u662f\u932f\u8aa4\u7684\u6216\u907a\u5931\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 models\\FHIR\\searchParameterQueryHandler.js \u5167\u7684\u65b9\u6cd5\u4fee\u6b63\u3002 \u7bc4\u4f8b\uff1a Bundle.composition \u5728\u4e00\u4e9b\u4f7f\u7528\u6848\u4f8b\uff0c\u60a8\u4e5f\u8a31\u6703\u60f3\u4f7f\u7528 bundle \u7684 entry.resource.subject.reference \u641c\u5c0b patient/{id} \u3002 The example URL: http://localhost:8080/fhir/Bundle?composition.patient = Patient/123 \u5982\u679c\u60a8\u60f3\u652f\u63f4\u6b64\u9805\u641c\u5c0b\u53c3\u6578\uff0c\u60a8\u53ef\u4ee5\u5728 api/FHIR/Bundle/BundleParametersHandler.js \u6a94\u6848\u65b0\u589e\u4ee5\u4e0b\u7a0b\u5f0f\u78bc //#region composition.patient // search parameter name: \"composition.patient\" // field in resource: \"entry.resource.subject.reference\" // type: reference paramsSearchFields [ \"composition.patient\" ] = [ \"entry.resource.subject.reference\" ]; paramsSearch [ \"composition.patient\" ] = ( query ) => { try { queryHandler . getReferenceQuery ( query , paramsSearchFields , \"composition.patient\" ); } catch ( e ) { console . error ( e ); throw e ; } }; //#endregion","title":"\u81ea\u884c\u65b0\u589e\u641c\u5c0b\u53c3\u6578"},{"location":"SearchParameter/Add_SearchParameter/#_1","text":"\u8207\u641c\u5c0b\u53c3\u6578\u76f8\u95dc\u7684\u7a0b\u5f0f\u78bc\u4f4d\u65bc models\\FHIR\\queryBuild.js \u4ee5\u53ca models\\FHIR\\searchParameterQueryHandler.js \u6a94\u6848\u3002 queryBuild.js : \u6839\u64da\u4e0d\u540c\u7684 Data Type \u7d44\u6210\u55ae\u500bMongoDB \u67e5\u8a62\u8a9e\u6cd5\u3002 searchParameterQueryHandler.js : \u6839\u64da HTTP \u7db2\u5740\u4e2d\u7684\u67e5\u8a62\u689d\u4ef6\u4f7f\u7528 queryBuild.js \u53d6\u5f97\u5b8c\u6574\u7684 MongoDB \u67e5\u8a62\u8a9e\u6cd5\u3002 \u7531\u7522\u751f\u5668\u7522\u751f\u4e4b\u90e8\u5206\u641c\u5c0b\u53c3\u6578\u53ef\u80fd\u662f\u932f\u8aa4\u7684\u6216\u907a\u5931\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 models\\FHIR\\searchParameterQueryHandler.js \u5167\u7684\u65b9\u6cd5\u4fee\u6b63\u3002","title":"\u81ea\u884c\u65b0\u589e\u641c\u5c0b\u53c3\u6578"},{"location":"SearchParameter/Add_SearchParameter/#bundlecomposition","text":"\u5728\u4e00\u4e9b\u4f7f\u7528\u6848\u4f8b\uff0c\u60a8\u4e5f\u8a31\u6703\u60f3\u4f7f\u7528 bundle \u7684 entry.resource.subject.reference \u641c\u5c0b patient/{id} \u3002 The example URL: http://localhost:8080/fhir/Bundle?composition.patient = Patient/123 \u5982\u679c\u60a8\u60f3\u652f\u63f4\u6b64\u9805\u641c\u5c0b\u53c3\u6578\uff0c\u60a8\u53ef\u4ee5\u5728 api/FHIR/Bundle/BundleParametersHandler.js \u6a94\u6848\u65b0\u589e\u4ee5\u4e0b\u7a0b\u5f0f\u78bc //#region composition.patient // search parameter name: \"composition.patient\" // field in resource: \"entry.resource.subject.reference\" // type: reference paramsSearchFields [ \"composition.patient\" ] = [ \"entry.resource.subject.reference\" ]; paramsSearch [ \"composition.patient\" ] = ( query ) => { try { queryHandler . getReferenceQuery ( query , paramsSearchFields , \"composition.patient\" ); } catch ( e ) { console . error ( e ); throw e ; } }; //#endregion","title":"\u7bc4\u4f8b\uff1a Bundle.composition"},{"location":"SearchParameter/Overview/","text":"\u641c\u5c0b\u53c3\u6578\u6982\u89c0 Burni \u76ee\u524d\u652f\u63f4\u7684 FHIR search operations \u5982\u4e0b: Search Parameter Types Number Date/DateTime String Token Reference Parameters for all resources _id _lastUpdated Search result parameters _count Info \u4e0b\u4e00\u7ae0\u60a8\u5c07\u6703\u77e5\u9053\u5982\u4f55\u4fee\u6b63 Burni \u907a\u5931\u6216\u932f\u8aa4\u7684\u641c\u5c0b\u53c3\u6578\u3002\u4e0b\u4e00\u7ae0 \u81ea\u884c\u65b0\u589e\u641c\u5c0b\u53c3\u6578","title":"\u6982\u89c0"},{"location":"SearchParameter/Overview/#_1","text":"Burni \u76ee\u524d\u652f\u63f4\u7684 FHIR search operations \u5982\u4e0b:","title":"\u641c\u5c0b\u53c3\u6578\u6982\u89c0"},{"location":"SearchParameter/Overview/#search-parameter-types","text":"Number Date/DateTime String Token Reference","title":"Search Parameter Types"},{"location":"SearchParameter/Overview/#parameters-for-all-resources","text":"_id _lastUpdated","title":"Parameters for all resources"},{"location":"SearchParameter/Overview/#search-result-parameters","text":"_count Info \u4e0b\u4e00\u7ae0\u60a8\u5c07\u6703\u77e5\u9053\u5982\u4f55\u4fee\u6b63 Burni \u907a\u5931\u6216\u932f\u8aa4\u7684\u641c\u5c0b\u53c3\u6578\u3002\u4e0b\u4e00\u7ae0 \u81ea\u884c\u65b0\u589e\u641c\u5c0b\u53c3\u6578","title":"Search result parameters"}]}